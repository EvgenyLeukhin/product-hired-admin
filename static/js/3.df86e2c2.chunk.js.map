{"version":3,"sources":["components/Header/HeaderTitle.js","img/no-logo.jpg","views/Pages/Companies.js"],"names":["withHeaderTitle","WrappedComponent","_Component","HeaderTitle","Object","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","newProp","setHeaderTitle","headerTitle","pubsub","publish","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","assign","props","Component","module","exports","Companies","state","data","count","loading","columnName","sortingOrder","toggleOrder","colName","_this","setState","_ref3","_ref5","_ref7","_this2","columns","Header","_this2$state","react__WEBPACK_IMPORTED_MODULE_6___default","onClick","bind","className","cln","desc","asc","accessor","width","Cell","_ref","original","style","textAlign","id","_this2$state2","fontWeight","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","d","name","_ref2","src","logo","noLogo","height","_this2$state3","domain","_ref4","href","concat","target","rel","_this2$state4","slug","_ref6","_this$state","react_table__WEBPACK_IMPORTED_MODULE_7__","pages","manual","resizable","onFetchData","instance","pageSize","page","axios","get","API_URL","headers","Authorization","localStorage","getItem","then","res","Math","ceil","params","filter","limit","skip","order","React"],"mappings":"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","file":"static/js/3.df86e2c2.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport pubsub from \"pubsub-js\";\r\n\r\nexport function withHeaderTitle(WrappedComponent) {\r\n    return class HeaderTitle extends Component {\r\n        render() {\r\n            const newProp = {\r\n                setHeaderTitle: headerTitle => {\r\n                    pubsub.publish(\"setPageTitle\", headerTitle);\r\n                }\r\n            };\r\n            return <WrappedComponent {...this.props} {...newProp} />;\r\n        }\r\n    };\r\n}\r\n","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAUFBQUFBQYGBgYICQgJCAwLCgoLDBINDg0ODRIbERQRERQRGxgdGBYYHRgrIh4eIisyKigqMjw2NjxMSExkZIYBBQUFBQUFBgYGBggJCAkIDAsKCgsMEg0ODQ4NEhsRFBERFBEbGB0YFhgdGCsiHh4iKzIqKCoyPDY2PExITGRkhv/CABEIABQAFAMBIgACEQEDEQH/xAAXAAADAQAAAAAAAAAAAAAAAAAABAYI/9oACAEBAAAAANlqNqytoB//xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAA//xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDEAAAAA//xAAhEAACAgIBBAMAAAAAAAAAAAABAgMEBRIhAAYRIhATIP/aAAgBAQABPwC9bix9K1clDGOCF5XCjyxVBsfA6xXcOJzJApTlyQ7AFSOI20Pxnbk1StFpQNtJpTFNHqWAjZG5YKG9fI54PWFztWfLfVV7ZNeR3dZ5kj1MZdy7CQhANi3sefz/AP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8AH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8AH//Z\"","import React from \"react\";\nimport ReactTable from \"react-table\";\nimport cln from 'classnames';\n\nimport noLogo from './../../img/no-logo.jpg';\n\n// import matchSorter from 'match-sorter';\n// filterMethod: (filter, rows) => matchSorter(rows, filter.value, { keys: ['name'] }),\n// filterAll: true,\n\nimport axios from 'axios';\nimport API_URL from '../../consts/apiUrl';\n\nimport { withHeaderTitle } from '../../components/Header/HeaderTitle';\n\n\nclass Companies extends React.Component {\n  state = {\n    data: [],\n    count: null,\n    loading: false,\n    columnName: 'id',\n    sortingOrder: 'DESC', // DESC-ASC\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.setHeaderTitle('Companies');\n  }\n\n  toggleOrder = (colName) => {\n    const { sortingOrder } = this.state;\n    this.setState({ columnName: colName });\n    sortingOrder === 'DESC' ? this.setState({ sortingOrder: 'ASC' }) : this.setState({ sortingOrder: 'DESC' })\n  }\n\n  render() {\n    const columns = [\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'id')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'id' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'id' && sortingOrder === 'ASC'\n              })}\n            >\n              ID\n            </div>\n          )\n        },\n        accessor: 'id',\n        width: 60,\n        Cell: ({ original }) => {\n          return (\n            <div style={{ textAlign: 'right' }} >\n              <span>{original.id || '...'}</span>\n            </div>\n          )\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'name')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'name' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'name' && sortingOrder === 'ASC'\n              })}\n            >\n              Name\n            </div>\n          )\n        },\n        accessor: 'name',\n        id: 'name',\n        style: { fontWeight: 'bold' },\n        accessor: d => d.name,\n        Cell: ({ original }) => {\n          return (\n            <div>\n              <img src={original.logo || noLogo} width={20} height=\"auto\" />\n              &nbsp;&nbsp;\n              <span>{original.name || '...'}</span>\n            </div>\n          );\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'domain')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'domain' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'domain' && sortingOrder === 'ASC'\n              })}\n            >\n              Domain\n            </div>\n          )\n        },\n        accessor: 'domain',\n        id: 'domain',\n        accessor: d => d.domain,\n        Cell: ({ original }) => {\n          if (original.domain) {\n            return (\n              <a href={`http://${original.domain}`} target=\"_blank\" rel=\"noopener noreferrer\">{original.domain}</a>\n            );\n          } else return <div>...</div>;\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'slug')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'slug' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'slug' && sortingOrder === 'ASC'\n              })}\n            >\n              Slug\n            </div>\n          )\n        },\n        accessor: 'slug',\n        id: 'slug',\n        accessor: d => d.slug,\n        Cell: ({ original }) => <div>{original.slug || '...'}</div>\n      },\n    ];\n\n    const { data, loading, count, columnName, sortingOrder } = this.state;\n\n    return (\n      <div>\n        <ReactTable\n          pages={count}\n          manual={true}\n          data={data}\n          loading={loading}\n          resizable={true}\n          // filterable={true}\n          className=\"companies-table -striped -highlight\"\n          columns={columns}\n          onFetchData={(state, instance) => {\n\n            // console.log(state); //sortedData\n            // own Table state\n            this.setState({ loading: true });\n            const pageSize = state.pageSize;\n            const page = state.page;\n\n            // fetch count\n            axios.get(`${API_URL}/api/api/companies/count`, {\n              headers: { Authorization: localStorage.getItem('ph-admin-token') }\n            }).then(res => {\n              this.setState({\n                count: Math.ceil(res.data.count / pageSize),\n              });\n\n            // fetch data only for 1 page\n            }).then(\n              axios.get(`${API_URL}/api/api/companies`, {\n                headers: { Authorization: localStorage.getItem('ph-admin-token') },\n                params: {\n                  filter: {\n                    \"limit\": pageSize,\n                    \"skip\": page * pageSize,\n                    \"order\": `${columnName} ${sortingOrder}`\n                  }\n                }\n              }).then(res => {\n                this.setState({ loading: false, data: res.data });\n              })\n            )\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withHeaderTitle(Companies);\n"],"sourceRoot":""}