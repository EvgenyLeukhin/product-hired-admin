{"version":3,"sources":["components/Header/HeaderTitle.js","views/ReactTableCustom/Modal.jsx","views/ReactTableCustom/index.jsx","views/Pages/Plans.js"],"names":["withHeaderTitle","WrappedComponent","_Component","HeaderTitle","Object","_Users_effectiveuser_Desktop_product_hired_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_effectiveuser_Desktop_product_hired_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_effectiveuser_Desktop_product_hired_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","_Users_effectiveuser_Desktop_product_hired_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_effectiveuser_Desktop_product_hired_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","newProp","setHeaderTitle","headerTitle","pubsub","publish","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","assign","props","Component","Modal","_this$props","isOpen","closeModal","itemOriginal","deleteRequest","modalLoader","react_default","lib_default","style","content","width","right","bottom","left","marginLeft","borderRadius","overlay","backgroundColor","zIndex","onRequestClose","ariaHideApp","className","concat","id","name","Spinner","Fragment","Button","outline","color","onClick","React","ReactTableCustom","state","data","count","loading","modalType","modalIsOpen","alert","editClick","original","_this","setState","deleteClick","dataPath","userData","JSON","parse","localStorage","getItem","token","axios","delete","API_URL","headers","Authorization","then","res","console","log","setTimeout","window","location","reload","catch","error","_this2","columns","order","_this$state","idColumn","Header","accessor","textAlign","Cell","_ref","controlsColumn","sortable","filterable","_ref2","ReactTableCustom_Modal","type","Alert","es","manual","pages","resizable","toConsumableArray","onFetchData","pageSize","page","sorted","filtered","filter","where","limit","skip","forEach","i","like","desc","get","params","Math","ceil","Plans","fontWeight","price","_ReactTableCustom__WEBPACK_IMPORTED_MODULE_6__"],"mappings":"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","file":"static/js/10.8f42130c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport pubsub from \"pubsub-js\";\r\n\r\nexport function withHeaderTitle(WrappedComponent) {\r\n    return class HeaderTitle extends Component {\r\n        render() {\r\n            const newProp = {\r\n                setHeaderTitle: headerTitle => {\r\n                    pubsub.publish(\"setPageTitle\", headerTitle);\r\n                }\r\n            };\r\n            return <WrappedComponent {...this.props} {...newProp} />;\r\n        }\r\n    };\r\n}\r\n","import React from \"react\";\nimport ReactModal from 'react-modal';\n\nimport { Button } from \"reactstrap\";\nimport Spinner from '../../components/Spinner';\n\nimport './modal.scss';\n\nclass Modal extends React.Component {\n  render() {\n    const { isOpen, closeModal, itemOriginal, deleteRequest, modalLoader } = this.props;\n\n    const modalStyles = {\n      content: {\n        width: '320px',\n        right: 'auto',\n        bottom: 'auto',\n        left: '50%',\n        marginLeft: '-160px',\n        borderRadius: '10px'\n      },\n\n      overlay: {\n        backgroundColor: 'rgba(0,0,0, .5)',\n        zIndex: '30'\n      }\n    }\n\n    return (\n      <ReactModal\n        isOpen={isOpen}\n        style={modalStyles}\n        onRequestClose={modalLoader ? false : closeModal}\n        ariaHideApp={false}\n        // onAfterOpen={afterOpenModal}\n        // onRequestClose={closeModal}\n        // contentLabel=\"Example Modal\"\n      >\n        <div className='ReactModal__delete'>\n          {\n            itemOriginal && (\n              <div className='ReactModal__delete__title'>\n                <span>Are you sure you want to delete </span> <br/>\n                {`\"${itemOriginal.id}`} - <b>{`${itemOriginal.name}\"?`}</b>\n              </div>\n            )\n          }\n\n          <div className='ReactModal__delete__buttons'>\n            {\n              !modalLoader ? (\n                <>\n                  <Button outline color=\"secondary\" onClick={closeModal}>Cancel</Button>\n                  <Button outline color=\"danger\" onClick={deleteRequest}>Delete</Button>\n                </>\n              ) : <Spinner />\n            }\n          </div>\n\n        </div>\n      </ReactModal>\n    );\n  }\n}\n\nexport default Modal;\n","import React from \"react\";\nimport ReactTable from \"react-table\";\nimport { Alert } from \"reactstrap\";\nimport axios from 'axios';\n\nimport Modal from './Modal';\n\nimport API_URL from '../../consts/apiUrl';\n\nimport './styles.scss';\n\nclass ReactTableCustom extends React.Component {\n  state = {\n    data: [],\n    count: null,\n    loading: false,\n    itemOriginal: null,\n    modalType: '',\n    modalIsOpen: false,\n    modalLoader: false,\n    alert: false\n  }\n\n  editClick = original => () => {\n    this.setState({\n      modalType: 'edit',\n      itemOriginal: original\n    });\n\n    alert(`Edit TODO id:${original.id}`);\n  }\n\n  deleteClick = original => () => {\n    this.setState({\n      modalType: 'delete',\n      modalIsOpen: true,\n      itemOriginal: original\n    });\n  }\n\n  deleteRequest = () => {\n    const { dataPath } = this.props;\n    const { itemOriginal: { id } } = this.state;\n\n    const userData = JSON.parse(localStorage.getItem('ph-admin-user-data'));\n    const token = userData && userData.id;\n\n\n    // delete request\n    axios.delete(\n      `${API_URL}/api/api/${dataPath}/${id}`,\n      {\n        headers: { Authorization: token }\n      })\n\n      // start loader\n      .then(this.setState({ modalLoader: true }))\n\n      // if ok\n      .then(res => {\n        console.log(res);\n        this.setState({ modalIsOpen: false, modalLoader: false })\n      })\n\n      // show alert and reload page with timeOut\n      .then(() => {\n        this.setState({ alert: true });\n\n        setTimeout(() => {\n          this.setState({ alert: false });\n          window.location.reload();\n        }, 2000);\n      })\n\n      // if not ok // TODO\n      .catch(error => {\n        console.log(error);\n        alert('Something is wrong!');\n      })\n  }\n\n  render() {\n    const { columns, dataPath, order } = this.props;\n    const {\n      data,\n      loading,\n      count,\n      itemOriginal,\n      modalType,\n      modalIsOpen,\n      modalLoader,\n      alert\n    } = this.state;\n\n    const idColumn = [\n      {\n        Header: 'Id',\n        accessor: 'id',\n        width: 60,\n        style: { textAlign: 'right' },\n        Cell: ({ original }) => <div>{original.id || '...'}</div>\n      }\n    ];\n\n    const controlsColumn = [\n      {\n        Header: '',\n        width: 65,\n        sortable: false,\n        filterable: false,\n        Cell: ({ original }) => (\n          <div className=\"rt-custom__controls\">\n            <i className=\"ion-edit\"           onClick={this.editClick(original)} />\n            <i className=\"ion-android-delete\" onClick={this.deleteClick(original)} />\n          </div>\n        )\n      }\n    ];\n\n    return (\n      <div>\n        <Modal\n          type={modalType}\n          itemOriginal={itemOriginal}\n          modalLoader={modalLoader}\n          isOpen={modalIsOpen}\n          closeModal={() => this.setState({ modalIsOpen: false })}\n          deleteRequest={this.deleteRequest}\n        />\n\n        {\n          alert && itemOriginal && (\n            <Alert color=\"danger\">\n              {`\"${itemOriginal.id}`} - <b>{`${itemOriginal.name}\" is deleted`}</b>\n            </Alert>\n          )\n        }\n\n        <ReactTable\n          manual={true}\n          pages={count}\n          data={data}\n          loading={loading}\n          resizable={true}\n          filterable={true}\n          className=\"-striped -highlight\"\n          columns={[...idColumn, ...columns, ...controlsColumn]}\n          onFetchData={state => {\n            // use ReactTable own state to forming a request\n            // it refresh always when we're doing any actions with this table\n            // console.log(state);\n\n            const { pageSize, page, sorted, filtered } = state;\n\n            this.setState({ loading: true });\n\n            // filter template for request\n            const filter = {\n              where: {},\n              limit: pageSize,\n              skip: page * pageSize,\n              order: order // id DESC - by default\n            };\n\n            // inject values to filter object when we fill data to filter inputs\n            filtered.forEach(i => {\n              if (i.id === 'id') filter.where[i.id] = i.value\n              else               filter.where[i.id] = { 'like': i.value + '%' }\n            });\n\n            // inject data to order when we click sorting\n            sorted.forEach(i => {\n              const desc = i.desc ? 'DESC' : 'ASC'\n              filter.order = `${i.id} ${desc}`;\n            });\n\n            // get token\n            const userData = JSON.parse(localStorage.getItem('ph-admin-user-data'));\n            const token = userData && userData.id;\n\n            // fetch only count\n            axios.get(`${API_URL}/api/api/${dataPath}/count`, {\n              // params for get count when we have filled filters\n              params: { where: filter.where },\n              headers: { Authorization: token },\n            }\n\n            ).then(res => {\n              // save count to coponent state\n              // res.data.count - all items inside response\n              // count - we find pages-count to add to Table property pages\n              this.setState({ count: Math.ceil(res.data.count / pageSize) });\n\n            // fetch data only for 1 page\n            }).then(\n              axios.get(`${API_URL}/api/api/${dataPath}`, {\n                params: { filter },\n                headers: { Authorization: token }\n\n              }).then(res => {\n                this.setState({\n                  // save data to component state\n                  data: res.data,\n                  loading: false\n                });\n\n                // TODO catch errors\n              }).catch(error => { console.log(error) })\n            )\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ReactTableCustom;\n","import React from \"react\";\nimport ReactTableCustom from '../ReactTableCustom';\n\nimport { withHeaderTitle } from '../../components/Header/HeaderTitle';\n\nclass Plans extends React.Component {\n  UNSAFE_componentWillMount() { this.props.setHeaderTitle('Plans') }\n\n  render() {\n    const columns = [\n      { Header: 'Plan',\n        accessor: 'plan',\n        style: { fontWeight: 'bold' },\n        Cell: ({ original }) => <div>{original.name || '...'}</div> },\n\n      { Header: 'Price',\n        accessor: 'price',\n        Cell: ({ original }) => <div>{`$${original.price}`}</div> || '...' },\n    ];\n\n    return (\n      <ReactTableCustom\n        columns={columns}\n        dataPath='plans'\n      />\n    );\n  }\n}\n\nexport default withHeaderTitle(Plans);\n"],"sourceRoot":""}