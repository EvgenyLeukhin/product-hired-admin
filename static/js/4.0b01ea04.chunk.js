(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{417:function(e,t,a){var n=a(450),o="object"==typeof self&&self&&self.Object===Object&&self,l=n||o||Function("return this")();e.exports=l},418:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(10),o=a(11),l=a(14),r=a(12),i=a(13),c=a(0),d=a.n(c),s=a(30),u=a.n(s);function m(e){return function(t){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(r.a)(a).apply(this,arguments))}return Object(i.a)(a,t),Object(o.a)(a,[{key:"render",value:function(){var t={setHeaderTitle:function(e){u.a.publish("setPageTitle",e)}};return d.a.createElement(e,Object.assign({},this.props,t))}}]),a}(c.Component)}},420:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},422:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(447);a(423);t.a=function(e){return o.a.createElement(l.a,Object.assign({},e,{resizable:!0,filterable:!0,className:"-striped -highlight"}))}},423:function(e,t,a){},425:function(e,t,a){"use strict";var n=a(111),o=a(0),l=a.n(o),r=a(641);t.a=function(e){var t=e.type,a=e.original,i=e.errorText,c=Object(o.useState)(!0),d=Object(n.a)(c,2),s=d[0],u=d[1];return l.a.createElement(l.a.Fragment,null,"add"===t&&l.a.createElement(r.a,{color:"success"},"New item is added")||"edit"===t&&l.a.createElement(r.a,{color:"warning"},'"'.concat(a.id)," - ",l.a.createElement("b",null,"".concat(a.name,'" is edited')))||"delete"===t&&l.a.createElement(r.a,{color:"danger"},'"'.concat(a.id)," - ",l.a.createElement("b",null,"".concat(a.name,'" is deleted')))||"error"===t&&l.a.createElement(r.a,{color:"danger",isOpen:s,toggle:function(){return u(!1)}},i))}},426:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(419),r=a.n(l);a(427),a(429);t.a=function(e){var t=e.isOpen,a=e.modalLoading,n=e.closeModal;return o.a.createElement(r.a,Object.assign({},e,{ariaHideApp:!1,isOpen:t,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__edit",portalClassName:"ReactModal__Portal__edit",onRequestClose:!a&&n}),e.children)}},427:function(e,t,a){},429:function(e,t,a){},431:function(e,t,a){var n=a(432),o=a(478),l=a(479),r="[object Null]",i="[object Undefined]",c=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?i:r:c&&c in Object(e)?o(e):l(e)}},432:function(e,t,a){var n=a(417).Symbol;e.exports=n},433:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},435:function(e,t,a){var n=a(431),o=a(433),l="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==l}},450:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a(66))},451:function(e,t,a){var n=a(420),o=a(435),l=NaN,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return l;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var a=c.test(e);return a||d.test(e)?s(e.slice(2),a?2:8):i.test(e)?l:+e}},463:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(282),r=a(6),i=a.n(r);a(464);t.a=function(e){var t=e.text,a=e.loading,n=e.addClick;return o.a.createElement(l.a,{type:"button",color:"primary",onClick:n,className:i()("add-button",{"is-loading":a})},"Add ",t)}},464:function(e,t,a){},466:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(419),r=a.n(l);a(468),a(470);t.a=function(e){var t=e.isOpen,a=e.modalLoading,n=e.closeModal;return o.a.createElement(r.a,Object.assign({},e,{ariaHideApp:!1,isOpen:t,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__add",portalClassName:"ReactModal__Portal__add",onRequestClose:!a&&n}),e.children)}},468:function(e,t,a){},470:function(e,t,a){},472:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(419),r=a.n(l);a(473);t.a=function(e){var t=e.isOpen,a=e.modalLoading,n=e.closeModal;return o.a.createElement(r.a,Object.assign({},e,{ariaHideApp:!1,isOpen:t,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__delete",portalClassName:"ReactModal__Portal__delete",onRequestClose:!a&&n}),e.children)}},473:function(e,t,a){},475:function(e,t,a){"use strict";t.__esModule=!0,t.Textarea=t.Input=t.default=void 0;var n=l(a(476)),o=l(a(0));function l(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t=e.debounceTimeout;return void 0===t?250:t},i=function(e){var t,a;return null!=e&&null!=(t=e.target)&&void 0!==(a=t.value)?a:e},c={value:void 0},d=function(e){return void 0===e&&(e=r),function(t){return function(a){var l,r;function d(t){var o;return(o=a.call(this)||this).state={},o._notify=(0,n.default)(function(e){o.props.onChange(e),o.setState(c)},"function"===typeof e?e(t):e),o._onBlur=function(e){o._notify.flush();var t=o.props.onBlur;void 0!==t&&t(e)},o._onChange=function(e){o.setState({value:i(e)}),null!=e&&"function"===typeof e.persist&&e.persist(),o._notify(e)},o._onKeyDown=function(e){null!=e&&"Enter"===e.key&&o._notify.flush();var t=o.props.onKeyDown;void 0!==t&&t(e)},o._wrappedInstance=null,o._onRef=function(e){o._wrappedInstance=e},o}r=a,(l=d).prototype=Object.create(r.prototype),l.prototype.constructor=l,l.__proto__=r;var s=d.prototype;return s.componentWillReceiveProps=function(e){e.value!==this.props.value&&(this._notify.cancel(),this.setState(c))},s.componentWillUnmount=function(){this._notify.flush()},s.getWrappedInstance=function(){return this._wrappedInstance},s.render=function(){var e=Object.assign({},this.props,{onBlur:this._onBlur,onChange:this._onChange,onKeyDown:this._onKeyDown,ref:this._onRef});delete e.debounceTimeout;var a=this.state.value;return void 0!==a&&(e.value=a),o.default.createElement(t,e)},d}(o.default.Component)}};t.default=d;var s=d()("input");t.Input=s;var u=d()("textarea");t.Textarea=u},476:function(e,t,a){var n=a(420),o=a(477),l=a(451),r="Expected a function",i=Math.max,c=Math.min;e.exports=function(e,t,a){var d,s,u,m,g,p,f=0,v=!1,h=!1,A=!0;if("function"!=typeof e)throw new TypeError(r);function E(t){var a=d,n=s;return d=s=void 0,f=t,m=e.apply(n,a)}function C(e){var a=e-p;return void 0===p||a>=t||a<0||h&&e-f>=u}function b(){var e=o();if(C(e))return O(e);g=setTimeout(b,function(e){var a=t-(e-p);return h?c(a,u-(e-f)):a}(e))}function O(e){return g=void 0,A&&d?E(e):(d=s=void 0,m)}function y(){var e=o(),a=C(e);if(d=arguments,s=this,p=e,a){if(void 0===g)return function(e){return f=e,g=setTimeout(b,t),v?E(e):m}(p);if(h)return g=setTimeout(b,t),E(p)}return void 0===g&&(g=setTimeout(b,t)),m}return t=l(t)||0,n(a)&&(v=!!a.leading,u=(h="maxWait"in a)?i(l(a.maxWait)||0,t):u,A="trailing"in a?!!a.trailing:A),y.cancel=function(){void 0!==g&&clearTimeout(g),f=0,d=p=s=g=void 0},y.flush=function(){return void 0===g?m:O(o())},y}},477:function(e,t,a){var n=a(417);e.exports=function(){return n.Date.now()}},478:function(e,t,a){var n=a(432),o=Object.prototype,l=o.hasOwnProperty,r=o.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=l.call(e,i),a=e[i];try{e[i]=void 0;var n=!0}catch(c){}var o=r.call(e);return n&&(t?e[i]=a:delete e[i]),o}},479:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},526:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAUFBQUFBQYGBgYICQgJCAwLCgoLDBINDg0ODRIbERQRERQRGxgdGBYYHRgrIh4eIisyKigqMjw2NjxMSExkZIYBBQUFBQUFBgYGBggJCAkIDAsKCgsMEg0ODQ4NEhsRFBERFBEbGB0YFhgdGCsiHh4iKzIqKCoyPDY2PExITGRkhv/CABEIABQAFAMBIgACEQEDEQH/xAAXAAADAQAAAAAAAAAAAAAAAAAABAYI/9oACAEBAAAAANlqNqytoB//xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAA//xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDEAAAAA//xAAhEAACAgIBBAMAAAAAAAAAAAABAgMEBRIhAAYRIhATIP/aAAgBAQABPwC9bix9K1clDGOCF5XCjyxVBsfA6xXcOJzJApTlyQ7AFSOI20Pxnbk1StFpQNtJpTFNHqWAjZG5YKG9fI54PWFztWfLfVV7ZNeR3dZ5kj1MZdy7CQhANi3sefz/AP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8AH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8AH//Z"},651:function(e,t,a){"use strict";a.r(t);var n=a(43),o=a(5),l=a(10),r=a(11),i=a(14),c=a(12),d=a(13),s=a(0),u=a.n(s),m=a(422),g=a(425),p=a(463),f=a(466),v=a(109),h=a(282),A=function(e){var t=e.name,a=e.domain,n=e.slug,o=e.weight,l=e.logo,r=e.cover,i=e.fileInputLogo,c=e.logoLoading,d=e.onUploadLogo,s=e.fileInputCover,m=e.coverLoading,g=e.onUploadCover,p=e.isOpen,A=e.closeModal,E=e.onChange,C=e.onSubmit,b=e.modalLoading,O=e.deleteLogo,y=e.deleteCover;return u.a.createElement(f.a,{isOpen:p,modalLoading:b,closeModal:A},u.a.createElement("section",{className:"section-container add-container"},u.a.createElement("h4",{className:"add-container__title"},"Add company"),u.a.createElement("span",{className:"ion-close-round add-container__close",onClick:A}),u.a.createElement("div",{className:"cardbox"},u.a.createElement("div",{className:"cardbox-body"},u.a.createElement("form",{action:"",onSubmit:C},u.a.createElement("fieldset",null,u.a.createElement("div",{className:"form-group row"},u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"add-name"},"Company name"),u.a.createElement("input",{name:"name",value:t,id:"add-name",onChange:E,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"add-domain"},"Domain"),u.a.createElement("input",{name:"domain",value:a,id:"add-domain",onChange:E,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"add-slug"},"Slug"),u.a.createElement("input",{name:"slug",value:n,id:"add-slug",onChange:E,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"add-weight"},"Weight"),u.a.createElement("input",{name:"weight",value:o,id:"add-weight",onChange:E,type:"number",className:"form-control"})),u.a.createElement("div",{className:"col-md-6  add-logo"},u.a.createElement("label",{htmlFor:"add-logo"},"Logo"),l&&u.a.createElement("div",{className:"delete",onClick:O}),c?u.a.createElement(v.a,null):l?u.a.createElement("img",{className:"logo",src:l,alt:"logo"}):u.a.createElement("div",{className:"no-logo"},"No logo"),u.a.createElement("input",{name:"logo",value:l,id:"add-logo",onChange:E,type:"url",className:"form-control",placeholder:"Please, paste image URL or load file"}),u.a.createElement("input",{type:"file",ref:i,onChange:d})),u.a.createElement("div",{className:"col-md-6  add-cover"},u.a.createElement("label",{htmlFor:"add-cover"},"Cover"),r&&u.a.createElement("div",{className:"delete",onClick:y}),m?u.a.createElement(v.a,null):r?u.a.createElement("img",{className:"cover",src:r,alt:"cover"}):u.a.createElement("div",{className:"no-cover"},"No cover"),u.a.createElement("input",{name:"cover",value:r,id:"add-cover",onChange:E,type:"url",className:"form-control",placeholder:"Please, paste image URL or load file"}),u.a.createElement("input",{type:"file",ref:s,onChange:g})))),b?u.a.createElement("div",{className:"add-container__is-loading"},u.a.createElement(v.a,null)):u.a.createElement("footer",{className:"add-container__buttons"},u.a.createElement(h.a,{outline:!0,color:"secondary",onClick:A},"Cancel"),u.a.createElement(h.a,{disabled:!t||!n||c||m,outline:!0,color:"primary",type:"submit"},"Save")))))))},E=a(426),C=function(e){var t=e.name,a=e.domain,n=e.slug,o=e.weight,l=e.logo,r=e.cover,i=e.original,c=e.fileInputLogo,d=e.logoLoading,s=e.onUploadLogo,m=e.fileInputCover,g=e.coverLoading,p=e.onUploadCover,f=e.isOpen,A=e.closeModal,C=e.onChange,b=e.onSubmit,O=e.modalLoading,y=e.deleteClick,N=e.deleteLogo,_=e.deleteCover;return u.a.createElement(E.a,{isOpen:f,modalLoading:O,closeModal:A},u.a.createElement("section",{className:"section-container edit-container"},u.a.createElement("h4",{className:"edit-container__title"},"Edit\xa0",u.a.createElement("b",null,'"'.concat(i.id," - ").concat(i.name,'"'))),u.a.createElement("span",{className:"ion-close-round edit-container__close",onClick:A}),u.a.createElement("div",{className:"cardbox"},u.a.createElement("div",{className:"cardbox-body"},u.a.createElement("form",{action:"",onSubmit:b},u.a.createElement("fieldset",null,u.a.createElement("div",{className:"form-group row"},u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-name"},"Company name"),u.a.createElement("input",{name:"name",value:t,id:"edit-name",onChange:C,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-domain"},"Domain"),u.a.createElement("input",{name:"domain",value:a,id:"edit-domain",onChange:C,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-slug"},"Slug"),u.a.createElement("input",{name:"slug",value:n,id:"edit-slug",onChange:C,type:"text",className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-weight"},"Weight"),u.a.createElement("input",{name:"weight",value:o,id:"edit-weight",onChange:C,type:"number",className:"form-control"})),u.a.createElement("div",{className:"col-md-6  edit-logo"},u.a.createElement("label",{htmlFor:"edit-logo"},"Logo"),l&&u.a.createElement("div",{className:"delete",onClick:N}),d?u.a.createElement(v.a,null):l?u.a.createElement("img",{className:"logo",src:l,alt:"logo"}):u.a.createElement("div",{className:"no-logo"},"No logo"),u.a.createElement("input",{name:"logo",value:l,id:"edit-logo",onChange:C,type:"url",className:"form-control",placeholder:"Please, paste image URL or load file"}),u.a.createElement("input",{type:"file",ref:c,onChange:s})),u.a.createElement("div",{className:"col-md-6  edit-cover"},u.a.createElement("label",{htmlFor:"edit-cover"},"Cover"),r&&u.a.createElement("div",{className:"delete",onClick:_}),g?u.a.createElement(v.a,null):r?u.a.createElement("img",{className:"cover",src:r,alt:"cover"}):u.a.createElement("div",{className:"no-cover"},"No cover"),u.a.createElement("input",{name:"cover",value:r,id:"edit-cover",onChange:C,type:"url",className:"form-control",placeholder:"Please, paste image URL or load file"}),u.a.createElement("input",{type:"file",ref:m,onChange:p})))),O?u.a.createElement("div",{className:"edit-container__is-loading"},u.a.createElement(v.a,null)):u.a.createElement("footer",{className:"edit-container__buttons"},u.a.createElement(h.a,{outline:!0,color:"danger",onClick:y},"Delete"),u.a.createElement(h.a,{outline:!0,color:"secondary",onClick:A},"Cancel"),u.a.createElement(h.a,{disabled:!t||!n||d||g,outline:!0,color:"primary",type:"submit"},"Save")))))))},b=a(472),O=function(e){var t=e.isOpen,a=e.modalLoading,n=e.closeModal,o=e.original,l=e.deleteSubmit;return u.a.createElement(b.a,{isOpen:t,modalLoading:a,closeModal:n},u.a.createElement("section",{className:"section-container delete-container"},u.a.createElement("span",{className:"ion-close-round ReactModal__delete__close",onClick:n}),u.a.createElement("div",{className:"ReactModal__delete__title"},u.a.createElement("span",null,"Are you sure you want to delete ")," ",u.a.createElement("br",null),u.a.createElement("span",null,o.id," - ",u.a.createElement("b",null,o.name),"?")),a?u.a.createElement("div",{className:"ReactModal__delete__is-loading"},u.a.createElement(v.a,null)):u.a.createElement("footer",{className:"ReactModal__delete__buttons"},u.a.createElement(h.a,{outline:!0,color:"secondary",onClick:n},"Cancel"),u.a.createElement(h.a,{outline:!0,color:"danger",onClick:l},"Delete"))))},y=a(418),N=a(57),_=a(58),I=a.n(_),S=function(e){var t=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,a=e.pageSize,n=e.page,o=e.filtered,l=e.sorted,r={where:{},limit:a,skip:n*a,order:"id DESC"};return o.forEach(function(e){"id"===e.id?r.where[e.id]=e.value:r.where[e.id]={like:"%"+e.value+"%"}}),l.forEach(function(e){var t=e.desc?"DESC":"ASC";r.order="".concat(e.id," ").concat(t)}),I.a.get("".concat(N.a,"/").concat(N.b,"/companies"),{params:{filter:r},headers:{Authorization:t}})},L=function(e){var t=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,a=e.filtered,n={};return a.forEach(function(e){"id"===e.id?n[e.id]=e.value:n[e.id]={like:"%"+e.value+"%"}}),I.a.get("".concat(N.a,"/").concat(N.b,"/companies/count"),{params:{where:n},headers:{Authorization:t}})},M=function(e,t,a,n,o,l){var r=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return I.a.post("".concat(N.a,"/").concat(N.b,"/companies"),{name:e,domain:t,slug:a,weight:n,logo:o,cover:l},{headers:{Authorization:r}})},w=function(e,t,a,n,o,l,r){var i=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return I.a.patch("".concat(N.a,"/").concat(N.b,"/companies/").concat(e),{name:t,domain:a,slug:n,weight:o,logo:l,cover:r},{headers:{Authorization:i}})},j=function(e){var t=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return I.a.delete("".concat(N.a,"/").concat(N.b,"/companies/").concat(e),{headers:{Authorization:t}})},x=function(e){var t=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return I.a.post("".concat(N.a,"/").concat(N.b,"/vacancies/logo"),e,{headers:{Authorization:t}})},k=function(e){var t=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return I.a.post("".concat(N.a,"/").concat(N.b,"/vacancies/cover"),e,{headers:{Authorization:t}})},R=a(475),B=function(e,t){return u.a.createElement(R.Input,{style:{width:"100%"},value:e?e.value:"",onChange:function(e){return t(e.target.value)},debounceTimeout:800})},F=a(526),T=a.n(F),D=[{Header:"Id",accessor:"id",width:60,style:{textAlign:"right"},Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.id||"...")},Filter:function(e){var t=e.filter,a=e.onChange;return B(t,a)}},{Header:"Company name",accessor:"name",style:{fontWeight:"bold"},Cell:function(e){var t=e.original;return u.a.createElement("div",null,u.a.createElement("img",{src:t.logo||T.a,width:20,height:20}),"\xa0\xa0",u.a.createElement("span",null,t.name||"..."))},Filter:function(e){var t=e.filter,a=e.onChange;return B(t,a)}},{Header:"Domain",accessor:"domain",Cell:function(e){var t=e.original;return t.domain?u.a.createElement("a",{href:"http://".concat(t.domain),target:"_blank",rel:"noopener noreferrer"},t.domain):"..."},Filter:function(e){var t=e.filter,a=e.onChange;return B(t,a)}},{Header:"Slug",accessor:"slug",Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.slug||"...")},Filter:function(e){var t=e.filter,a=e.onChange;return B(t,a)}},{Header:"Weight",accessor:"weight",width:60,Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.weight||"...")},Filter:function(e){var t=e.filter,a=e.onChange;return B(t,a)}}],U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),d=0;d<n;d++)r[d]=arguments[d];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).fileInputLogo=u.a.createRef(),a.fileInputCover=u.a.createRef(),a.state={companies:[],companiesCount:null,tableLoading:!1,original:{},alertIsOpen:!1,alertType:"",alertErrorText:"",addModalIsOpen:!1,editModalIsOpen:!1,deleteModalIsOpen:!1,modalLoading:!1,id:null,name:"",slug:"",domain:"",weight:null,logo:"",logoLoading:!1,cover:"",coverLoading:!1},a.onChange=function(e){return a.setState(Object(o.a)({},e.target.name,e.target.value))},a.catchErrors=function(e){401===e.response.status?(localStorage.removeItem("ph-admin-user-data"),a.props.history.push("/login")):a.setState({modalLoading:!1,addModalIsOpen:!1,editModalIsOpen:!1,deleteModalIsOpen:!1,alertType:"error",alertIsOpen:!0,alertErrorText:"".concat(e)})},a.onUploadLogo=function(e){e.preventDefault(),a.setState({logoLoading:!0});var t=new FormData,n=a.fileInputLogo.current.files[0];t.append("file",n),x(t).then(function(e){a.setState({logo:"".concat(N.a,"/").concat(N.b,"/containers/logo/download/").concat(e.data.name),logoLoading:!1})}).catch(function(e){return a.catchErrors(e)})},a.onUploadCover=function(e){e.preventDefault(),a.setState({coverLoading:!0});var t=new FormData,n=a.fileInputCover.current.files[0];t.append("file",n),k(t).then(function(e){a.setState({cover:"".concat(N.a,"/").concat(N.b,"/containers/cover/download/").concat(e.data.name),coverLoading:!1})}).catch(function(e){return a.catchErrors(e)})},a.addClick=function(){a.setState({addModalIsOpen:!0,alertIsOpen:!1,name:"",domain:"",slug:"",weight:null,logo:"",cover:""})},a.addSubmit=function(e){e.preventDefault(),a.setState({modalLoading:!0});var t=a.state,n=t.name,o=t.domain,l=t.slug,r=t.weight,i=t.logo,c=t.cover,d=t.companies;M(n,o,l,r,i,c).then(function(e){var t=[e.data].concat(d);a.setState({modalLoading:!1,addModalIsOpen:!1,alertType:"add",alertIsOpen:!0,companies:t}),setTimeout(function(){a.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return a.catchErrors(e)})},a.editClick=function(e){return function(){a.setState({original:e,alertIsOpen:!1,editModalIsOpen:!0,id:e.id,name:e.name,domain:e.domain,slug:e.slug,weight:e.weight,logo:e.logo,cover:e.cover})}},a.editSubmit=function(e){e.preventDefault(),a.setState({modalLoading:!0});var t=a.state,n=t.id,o=t.name,l=t.domain,r=t.slug,i=t.weight,c=t.logo,d=t.cover;w(n,o,l,r,i,c,d).then(function(){for(var e=a.state.companies,t=0;t<e.length;t++)e[t].id===n&&(e[t]={id:n,name:o,domain:l,slug:r,weight:i,logo:c,cover:d});a.setState({companies:e,modalLoading:!1,editModalIsOpen:!1,alertType:"edit",alertIsOpen:!0}),setTimeout(function(){a.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return a.catchErrors(e)})},a.deleteClick=function(e){return function(){a.setState({original:e,deleteModalIsOpen:!0})}},a.deleteSubmit=function(){var e=[],t=a.state,n=t.companies,o=t.original.id;a.setState({modalLoading:!0}),j(o).then(function(){for(var t=0;t<n.length;t++)n[t].id!==o&&e.push(n[t]);a.setState({companies:e,editModalIsOpen:!1,deleteModalIsOpen:!1,modalLoading:!1,alertType:"delete",alertIsOpen:!0}),setTimeout(function(){a.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return a.catchErrors(e)})},a.deleteLogo=function(){return a.setState({logo:""})},a.deleteCover=function(){return a.setState({cover:""})},a.closeAddModal=function(){return!a.state.modalLoading&&a.setState({addModalIsOpen:!1})},a.closeEditModal=function(){return!a.state.modalLoading&&a.setState({editModalIsOpen:!1})},a.closeDeleteModal=function(){return!a.state.modalLoading&&a.setState({deleteModalIsOpen:!1})},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setHeaderTitle("Companies")}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keyup",function(t){return 27===t.keyCode&&e.closeEditModal()})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",function(e){return 27===e.keyCode})}},{key:"render",value:function(){var e,t=this,a=this.state,l=a.tableLoading,r=a.original,i=a.companies,c=a.companiesCount,d=a.name,s=a.domain,f=a.slug,v=a.weight,h=a.logo,E=a.cover,b=a.logoLoading,y=a.coverLoading,N=a.addModalIsOpen,_=a.editModalIsOpen,I=a.modalLoading,M=a.deleteModalIsOpen,w=a.alertIsOpen,j=a.alertType,x=a.alertErrorText,k=[{Header:"",width:65,sortable:!1,filterable:!1,Cell:function(e){var a=e.original;return u.a.createElement("div",{className:"rt-custom__controls"},u.a.createElement("i",{className:"ion-android-delete",onClick:t.deleteClick(a)}),u.a.createElement("i",{className:"ion-edit",onClick:t.editClick(a)}))}}];return u.a.createElement("div",{className:"companies-page"},w&&u.a.createElement(g.a,{type:j,original:r,errorText:x}),u.a.createElement(p.a,{text:"company",loading:I,addClick:this.addClick}),u.a.createElement(O,{isOpen:M,modalLoading:I,closeModal:this.closeDeleteModal,original:r,deleteSubmit:this.deleteSubmit}),u.a.createElement(A,(e={name:d,domain:s,slug:f,weight:v,logo:h,cover:E},Object(o.a)(e,"logo",h),Object(o.a)(e,"logoLoading",b),Object(o.a)(e,"fileInputLogo",this.fileInputLogo),Object(o.a)(e,"onUploadLogo",this.onUploadLogo),Object(o.a)(e,"cover",E),Object(o.a)(e,"coverLoading",y),Object(o.a)(e,"fileInputCover",this.fileInputCover),Object(o.a)(e,"onUploadCover",this.onUploadCover),Object(o.a)(e,"isOpen",N),Object(o.a)(e,"modalLoading",I),Object(o.a)(e,"closeModal",this.closeAddModal),Object(o.a)(e,"onChange",this.onChange),Object(o.a)(e,"onSubmit",this.addSubmit),Object(o.a)(e,"deleteLogo",this.deleteLogo),Object(o.a)(e,"deleteCover",this.deleteCover),e)),u.a.createElement(C,{original:r,name:d,domain:s,slug:f,weight:v,logo:h,logoLoading:b,fileInputLogo:this.fileInputLogo,onUploadLogo:this.onUploadLogo,cover:E,coverLoading:y,fileInputCover:this.fileInputCover,onUploadCover:this.onUploadCover,isOpen:_,modalLoading:I,closeModal:this.closeEditModal,onChange:this.onChange,onSubmit:this.editSubmit,deleteClick:this.deleteClick(r),deleteLogo:this.deleteLogo,deleteCover:this.deleteCover}),u.a.createElement(m.a,{manual:!0,data:i,pages:c,loading:l,columns:[].concat(Object(n.a)(D),k),onFetchData:function(e){t.setState({tableLoading:!0}),L(e).then(function(a){t.setState({companiesCount:Math.ceil(a.data.count/e.pageSize)}),S(e).then(function(e){return t.setState({companies:e.data,tableLoading:!1})}).catch(function(e){return t.catchErrors(e)})}).catch(function(e){return t.catchErrors(e)})}}))}}]),t}(u.a.Component);t.default=Object(y.a)(U)}}]);
//# sourceMappingURL=4.0b01ea04.chunk.js.map