(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{417:function(e,a,t){"use strict";t.d(a,"a",function(){return m});var n=t(10),r=t(11),o=t(13),i=t(12),l=t(14),c=t(0),s=t.n(c),d=t(29),u=t.n(d);function m(e){return function(a){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,a),Object(r.a)(t,[{key:"render",value:function(){var a={setHeaderTitle:function(e){u.a.publish("setPageTitle",e)}};return s.a.createElement(e,Object.assign({},this.props,a))}}]),t}(c.Component)}},436:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(458);t(437);a.a=function(e){var a=e.data,t=e.pages,n=e.loading,i=e.columns,l=e.onFetchData,c=e.manual,s=void 0===c||c;return r.a.createElement(o.a,Object.assign({},e,{data:a,manual:s,pages:t,resizable:!0,filterable:!0,loading:n,className:"-striped -highlight",columns:i,onFetchData:l}))}},437:function(e,a,t){},439:function(e,a,t){"use strict";var n=t(107),r=t(0),o=t.n(r),i=t(634);a.a=function(e){var a=e.type,t=e.original,l=e.errorText,c=Object(r.useState)(!0),s=Object(n.a)(c,2),d=s[0],u=s[1];return o.a.createElement(o.a.Fragment,null,"add"===a&&o.a.createElement(i.a,{color:"success"},"New item is added")||"edit"===a&&o.a.createElement(i.a,{color:"warning"},'"'.concat(t.id)," - ",o.a.createElement("b",null,"".concat(t.name,'" is edited')))||"delete"===a&&o.a.createElement(i.a,{color:"danger"},'"'.concat(t.id)," - ",o.a.createElement("b",null,"".concat(t.name,'" is deleted')))||"error"===a&&o.a.createElement(i.a,{color:"danger",isOpen:d,toggle:function(){return u(!1)}},l))}},440:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(421),i=t.n(o);t(441);a.a=function(e){var a=e.isOpen,t=e.modalLoading,n=e.closeModal;return r.a.createElement(i.a,Object.assign({},e,{ariaHideApp:!1,isOpen:a,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__edit",onRequestClose:!t&&n}),e.children)}},441:function(e,a,t){},646:function(e,a,t){"use strict";t.r(a);var n=t(49),r=t(5),o=t(10),i=t(11),l=t(13),c=t(12),s=t(14),d=t(0),u=t.n(d),m=t(436),p=t(439),g=t(440),f=t(106),h=t(282),v=function(e){var a=e.name,t=e.price,n=e.original,r=e.isOpen,o=e.closeModal,i=e.onChange,l=e.onSubmit,c=e.modalLoading;return u.a.createElement(g.a,{isOpen:r,modalLoading:c,closeModal:o},u.a.createElement("section",{className:"section-container edit-container"},u.a.createElement("h4",{className:"edit-container__title"},"Edit\xa0",u.a.createElement("b",null,'"'.concat(n.id," - ").concat(n.name,'"'))),u.a.createElement("span",{className:"ion-close-round edit-container__close",onClick:o}),u.a.createElement("div",{className:"cardbox"},u.a.createElement("div",{className:"cardbox-body"},u.a.createElement("form",{action:"",onSubmit:l},u.a.createElement("fieldset",null,u.a.createElement("div",{className:"form-group row"},u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-name"},"Plan"),u.a.createElement("input",{required:!0,name:"name",type:"text",value:a,id:"edit-name",onChange:i,className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-price"},"Price"),u.a.createElement("input",{required:!0,min:0,max:1e4,name:"price",type:"number",value:t,id:"edit-price",onChange:i,className:"form-control"})))),c?u.a.createElement("div",{className:"edit-container__is-loading"},u.a.createElement(f.a,null)):u.a.createElement("footer",{className:"edit-container__buttons"},u.a.createElement(h.a,{outline:!0,color:"secondary",onClick:o},"Cancel"),u.a.createElement(h.a,{outline:!0,color:"primary",type:"submit"},"Save")))))))},b=t(417),E=t(59),O=t.n(E),y=t(58),S=function(){var e=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return O.a.get("".concat(y.a,"/").concat(y.b,"/plans"),{headers:{Authorization:e}})},C=function(e,a,t){var n=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return O.a.patch("".concat(y.a,"/").concat(y.b,"/plans/").concat(e),{name:a,price:t},{headers:{Authorization:n}})},N=[{Header:"Id",accessor:"id",width:60,style:{textAlign:"right"},Cell:function(e){var a=e.original;return u.a.createElement("div",null,a.id||"...")}},{Header:"Plan",accessor:"name",style:{fontWeight:"bold"},Cell:function(e){var a=e.original;return u.a.createElement("div",null,a.name||"...")},filterMethod:function(e,a){var t=e.pivotId||e.id;return void 0===a[t]||String(a[t].toLowerCase()).includes(e.value.toLowerCase())}},{Header:"Price",accessor:"price",Cell:function(e){var a=e.original;return u.a.createElement("div",null,"$".concat(a.price))||"..."}}],I=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(i)))).state={plans:[],tableLoading:!1,alertIsOpen:!1,alertType:"",alertErrorText:"",editModalIsOpen:!1,modalLoading:!1,original:{},id:null,name:"",price:null},t.editClick=function(e){return function(){t.setState({editModalIsOpen:!0,original:e,id:e.id,name:e.name,price:e.price,alertIsOpen:!1})}},t.onChange=function(e){return t.setState(Object(r.a)({},e.target.name,e.target.value))},t.closeModal=function(){return!t.state.modalLoading&&t.setState({editModalIsOpen:!1})},t.editSubmit=function(e){e.preventDefault(),t.setState({modalLoading:!0});var a=t.state,n=a.id,r=a.name,o=a.price;C(n,r,o).then(function(){for(var e=t.state.plans,a=0;a<e.length;a++)e[a].id===n&&(e[a]={id:n,name:r,price:o});t.setState({plans:e,modalLoading:!1,editModalIsOpen:!1,alertType:"edit",alertIsOpen:!0}),setTimeout(function(){t.setState({alertIsOpen:!1})},2e3)}).catch(function(e){401===e.response.status?(localStorage.removeItem("ph-admin-user-data"),t.props.history.push("/login")):t.setState({modalLoading:!1,editModalIsOpen:!1,alertType:"error",alertIsOpen:!0,alertErrorText:"".concat(e)})})},t}return Object(s.a)(a,e),Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setHeaderTitle("Plans")}},{key:"componentDidMount",value:function(){var e=this;this.setState({tableLoading:!0}),S().then(function(a){return e.setState({plans:a.data,tableLoading:!1})}).catch(function(a){401===a.response.status?(localStorage.removeItem("ph-admin-user-data"),e.props.history.push("/login")):e.setState({modalLoading:!1,alertType:"error",alertIsOpen:!0,alertErrorText:"".concat(a)})}),document.addEventListener("keyup",function(a){return 27===a.keyCode&&e.closeModal()})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",function(e){return 27===e.keyCode})}},{key:"render",value:function(){var e=this,a=this.state,t=a.tableLoading,r=a.original,o=a.name,i=a.price,l=a.plans,c=a.editModalIsOpen,s=a.modalLoading,d=a.alertIsOpen,g=a.alertType,f=a.alertErrorText,h=[{Header:"",width:65,sortable:!1,filterable:!1,Cell:function(a){var t=a.original;return u.a.createElement("div",{className:"rt-custom__controls"},u.a.createElement("i",{className:"ion-edit",onClick:e.editClick(t)}))}}];return u.a.createElement("div",{className:"plans-page"},d&&u.a.createElement(p.a,{type:g,original:r,errorText:f}),u.a.createElement(v,{name:o,price:i,original:r,isOpen:c,modalLoading:s,closeModal:this.closeModal,onChange:this.onChange,onSubmit:this.editSubmit}),u.a.createElement(m.a,{data:l,manual:!1,loading:t,columns:[].concat(Object(n.a)(N),h)}))}}]),a}(u.a.Component);a.default=Object(b.a)(I)}}]);
//# sourceMappingURL=9.6ef1e742.chunk.js.map