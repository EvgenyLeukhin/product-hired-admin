(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{409:function(e,a,t){"use strict";t.d(a,"a",function(){return u});var n=t(10),o=t(11),l=t(13),i=t(12),c=t(14),r=t(0),s=t.n(r),d=t(30),m=t.n(d);function u(e){return function(a){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,a),Object(o.a)(t,[{key:"render",value:function(){var a={setHeaderTitle:function(e){m.a.publish("setPageTitle",e)}};return s.a.createElement(e,Object.assign({},this.props,a))}}]),t}(r.Component)}},411:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(442);t(412);a.a=function(e){return o.a.createElement(l.a,Object.assign({},e,{resizable:!0,filterable:!0,className:"-striped -highlight"}))}},412:function(e,a,t){},414:function(e,a,t){"use strict";var n=t(110),o=t(0),l=t.n(o),i=t(637);a.a=function(e){var a=e.type,t=e.original,c=e.errorText,r=Object(o.useState)(!0),s=Object(n.a)(r,2),d=s[0],m=s[1],u=t.surname?"".concat(t.name," ").concat(t.surname):"".concat(t.name);return l.a.createElement(l.a.Fragment,null,"add"===a&&l.a.createElement(i.a,{color:"success"},"New item is added")||"edit"===a&&l.a.createElement(i.a,{color:"warning"},'"'.concat(t.id)," - ",l.a.createElement("b",null,u," is edited"))||"delete"===a&&l.a.createElement(i.a,{color:"danger"},'"'.concat(t.id)," - ",l.a.createElement("b",null,u," is deleted"))||"error"===a&&l.a.createElement(i.a,{color:"danger",isOpen:d,toggle:function(){return m(!1)}},c))}},415:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(408),i=t.n(l);t(416),t(418);a.a=function(e){var a=e.isOpen,t=e.modalLoading,n=e.closeModal;return o.a.createElement(i.a,Object.assign({},e,{ariaHideApp:!1,isOpen:a,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__edit",portalClassName:"ReactModal__Portal__edit",onRequestClose:!t&&n}),e.children)}},416:function(e,a,t){},418:function(e,a,t){},422:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(522),i=t(6),c=t.n(i);t(423);a.a=function(e){var a=e.text,t=e.loading,n=e.addClick;return o.a.createElement(l.a,{type:"button",color:"primary",onClick:n,className:c()("add-button",{"is-loading":t})},"Add ",a)}},423:function(e,a,t){},425:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(408),i=t.n(l);t(426),t(428);a.a=function(e){var a=e.isOpen,t=e.modalLoading,n=e.closeModal;return o.a.createElement(i.a,Object.assign({},e,{ariaHideApp:!1,isOpen:a,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__add",portalClassName:"ReactModal__Portal__add",onRequestClose:!t&&n}),e.children)}},426:function(e,a,t){},428:function(e,a,t){},430:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(408),i=t.n(l);t(431);a.a=function(e){var a=e.isOpen,t=e.modalLoading,n=e.closeModal;return o.a.createElement(i.a,Object.assign({},e,{ariaHideApp:!1,isOpen:a,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__delete",portalClassName:"ReactModal__Portal__delete",onRequestClose:!t&&n}),e.children)}},431:function(e,a,t){},444:function(e,a,t){"use strict";var n=t(0),o=t.n(n),l=t(454);a.a=function(e,a){return o.a.createElement(l.Input,{style:{width:"100%"},value:e?e.value:"",onChange:function(e){return a(e.target.value)},debounceTimeout:800})}},516:function(e,a,t){},645:function(e,a,t){"use strict";t.r(a);var n=t(43),o=t(9),l=t(5),i=t(10),c=t(11),r=t(13),s=t(12),d=t(14),m=t(112),u=t(0),p=t.n(u),g=t(57),h=t(411),v=t(414),f=t(422),b=t(474),y=t(425),O=t(109),E=t(522),_=t(58),C=t.n(_),S=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/companies"),{params:{filter:{where:{name:{like:"%".concat(e,"%")}},limit:10}},headers:{Authorization:a}})},N=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/users"),{params:{filter:{where:{or:[{name:{like:"%".concat(e,"%")}},{surname:{like:"%".concat(e,"%")}},{email:{like:"%".concat(e,"%")}}]},limit:10}},headers:{Authorization:a}})},j=function(e){var a=e.name,t=e.company,n=e.user,o=e.isOpen,l=e.closeModal,i=e.onChange,c=e.onSubmit,r=e.modalLoading,s=e.onChangeCompany,d=e.onChangeUser;return p.a.createElement(y.a,{isOpen:o,modalLoading:r,closeModal:l},p.a.createElement("section",{className:"section-container add-container"},p.a.createElement("h4",{className:"add-container__title"},"Add user"),p.a.createElement("span",{className:"ion-close-round add-container__close",onClick:l}),p.a.createElement("div",{className:"cardbox"},p.a.createElement("div",{className:"cardbox-body"},p.a.createElement("form",{action:"",onSubmit:c},p.a.createElement("fieldset",null,p.a.createElement("div",{className:"form-group row"},p.a.createElement("div",{className:"col-md-12"},p.a.createElement("label",{htmlFor:"add-name"},"Job title"),p.a.createElement("input",{required:!0,autoComplete:"off",name:"name",value:a,id:"add-name",onChange:i,type:"text",className:"form-control"})),p.a.createElement("div",{className:"col-md-6"},p.a.createElement("label",{htmlFor:"add-surname"},"Company"),p.a.createElement(b.a,{menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return S(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},onChange:s,value:t})),p.a.createElement("div",{className:"col-md-6"},p.a.createElement("label",{htmlFor:"add-password"},"User"),p.a.createElement(b.a,{menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return N(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return"".concat(e.name," ").concat(e.surname," ").concat(e.email)},onChange:d,value:n})))),r?p.a.createElement("div",{className:"add-container__is-loading"},p.a.createElement(O.a,null)):p.a.createElement("footer",{className:"add-container__buttons"},p.a.createElement(E.a,{outline:!0,color:"secondary",onClick:l},"Cancel"),p.a.createElement(E.a,{disabled:!a||!t.name||!n.name,outline:!0,color:"primary",type:"submit"},"Save")))))))},L=t(430),I=function(e){var a=e.isOpen,t=e.modalLoading,n=e.closeModal,o=e.original,l=e.deleteSubmit;return p.a.createElement(L.a,{isOpen:a,modalLoading:t,closeModal:n},p.a.createElement("section",{className:"section-container delete-container"},p.a.createElement("span",{className:"ion-close-round ReactModal__delete__close",onClick:n}),p.a.createElement("div",{className:"ReactModal__delete__title"},p.a.createElement("span",null,"Are you sure you want to delete ")," ",p.a.createElement("br",null),p.a.createElement("span",null,o.id," - ",p.a.createElement("b",null,o.name),"?")),t?p.a.createElement("div",{className:"ReactModal__delete__is-loading"},p.a.createElement(O.a,null)):p.a.createElement("footer",{className:"ReactModal__delete__buttons"},p.a.createElement(E.a,{outline:!0,color:"secondary",onClick:n},"Cancel"),p.a.createElement(E.a,{outline:!0,color:"danger",onClick:l},"Delete"))))},M=t(549),k=t.n(M),w=t(502),x=t(496),D=t.n(x),F=t(415),A=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/skills"),{params:{filter:{where:{name:{like:"%".concat(e,"%")}},limit:50}},headers:{Authorization:a}})},U=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/locations"),{params:{filter:{where:{name:{like:"%".concat(e,"%")}},limit:50}},headers:{Authorization:a}})},J=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/vacancy_roles"),{params:{filter:{where:{name:{like:"%".concat(e,"%")}},limit:10}},headers:{Authorization:a}})},P=[{value:1,label:"Junior"},{value:2,label:"Mid level"},{value:3,label:"Senior"},{value:4,label:"Managment"}],R=[{value:"public",label:"Public"},{value:"draft",label:"Draft"},{value:"expired",label:"Expired"}],T=[{value:1,label:"Free"},{value:2,label:"Bronze"},{value:3,label:"Silver"},{value:4,label:"Gold"}],z=(t(632),t(516),function(e){var a=e.original,t=(e.id,e.name),n=e.created,o=e.modified,l=e.published,i=e.views,c=e.impressions,r=e.details,s=e.experience_from,d=e.experience_up,m=e.seniority,u=e.seniorityObj,h=e.skills,v=e.status,f=e.statusObj,y=e.plan_id,_=e.planObj,C=e.company,j=e.company_id,L=e.locations,I=e.user,M=e.employer_id,x=e.vacancy,z=e.vacancy_role,V=e.logo,H=e.cover,q=e.logoSwitcher,W=e.coverSwitcher,B=e.logoLoading,G=e.coverLoading,K=e.fileInputLogo,Q=e.fileInputCover,X=e.onUploadLogo,Y=e.onUploadCover,Z=e.onDeleteLogo,$=e.onDeleteCover,ee=e.isOpen,ae=e.closeModal,te=e.onSubmit,ne=e.modalLoading,oe=e.deleteClick,le=e.onChange,ie=e.onChangeDetails,ce=e.onChangeSeniority,re=e.onChangeSkills,se=e.onChangeStatus,de=e.onChangePlan,me=e.onChangeLocations,ue=e.onChangeCompany,pe=e.onChangeUser,ge=e.onChangeVacancy,he=n&&"".concat(n.substring(0,10),", ").concat(n.substring(11,16)," UTC"),ve=o&&"".concat(o.substring(0,10),", ").concat(o.substring(11,16)," UTC"),fe="".concat(g.a,"/").concat(g.b,"/containers/logo/download/").concat(V),be="".concat(g.a,"/").concat(g.b,"/containers/cover/download/").concat(H);if(!q&&V&&V.includes("http")){var ye=V.split("/").pop();fe="".concat(g.a,"/").concat(g.b,"/containers/logo/download/").concat(ye)}if(!W&&H&&H.includes("http")){var Oe=H.split("/").pop();be="".concat(g.a,"/").concat(g.b,"/containers/cover/download/").concat(Oe)}return p.a.createElement(F.a,{isOpen:ee,modalLoading:ne,closeModal:ae},p.a.createElement("section",{className:"section-container edit-container edit-job"},p.a.createElement("h4",{className:"edit-container__title"},"Edit\xa0",p.a.createElement("b",null,'"'.concat(a.id," - ").concat(a.name,'"'))),p.a.createElement("span",{className:"ion-close-round edit-container__close",onClick:ae}),p.a.createElement("div",{className:"cardbox"},p.a.createElement("div",{className:"cardbox-body"},p.a.createElement("form",{action:"",onSubmit:te},p.a.createElement("fieldset",null,p.a.createElement("div",{className:"form-group row top-fields"},p.a.createElement("div",{className:"col-md-3 col-sm-6"},p.a.createElement("b",null,"Created"),p.a.createElement("span",null,he||"")),p.a.createElement("div",{className:"col-md-3 col-sm-6"},p.a.createElement("b",null,"Modified"),p.a.createElement("span",null,ve||"")),p.a.createElement("div",{className:"col-md-3 col-sm-6"},p.a.createElement("b",null,"Views"),p.a.createElement("span",null,i||0)),p.a.createElement("div",{className:"col-md-3 col-sm-6"},p.a.createElement("b",null,"Impressions"),p.a.createElement("span",null,c||0)))),p.a.createElement("fieldset",null,p.a.createElement("div",{className:"form-group row"},p.a.createElement("div",{className:"col-md-5"},p.a.createElement("label",{htmlFor:"edit-name"},"Job title"),p.a.createElement("input",{name:"name",type:"text",value:t,id:"edit-name",onChange:le,className:"form-control"})),p.a.createElement("div",{className:"col-md-2"},p.a.createElement("label",{htmlFor:"edit-plan_id"},"Plan"),p.a.createElement("input",{hidden:!0,name:"plan_id",value:y,id:"edit-plan_id",onChange:le,type:"number",className:"form-control"}),p.a.createElement(w.a,{value:_,onChange:de,options:T})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-published"},"Published"),p.a.createElement("input",{type:"date",name:"published",id:"edit-published",value:l&&l.substring(0,10),onChange:le,className:"form-control"})),p.a.createElement("div",{className:"col-md-2"},p.a.createElement("label",{htmlFor:"edit-status"},"Status"),p.a.createElement("input",{hidden:!0,name:"status",value:v,id:"edit-status",onChange:le,type:"text",className:"form-control"}),p.a.createElement(w.a,{value:f,onChange:se,options:R})),p.a.createElement("div",{className:"col-md-4"},p.a.createElement("label",{htmlFor:"edit-employer_id"},"User"),p.a.createElement("input",{hidden:!0,name:"employer_id",value:M,id:"edit-employer_id",onChange:le,type:"number",className:"form-control"}),p.a.createElement(b.a,{menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return N(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return"".concat(e.name," ").concat(e.surname," ").concat(e.email)},onChange:pe,value:I})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-company_id"},"Company"),p.a.createElement("input",{hidden:!0,name:"company_id",value:j,id:"edit-company_id",onChange:le,type:"number",className:"form-control"}),p.a.createElement(b.a,{menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return S(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return"".concat(e.name)},onChange:ue,value:C})),p.a.createElement("div",{className:"col-md-5"},p.a.createElement("label",{htmlFor:"edit-locations"},"Locations"),p.a.createElement(b.a,{isMulti:!0,menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return U(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return"".concat(e.name)},onChange:me,value:L})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-vacancy_role"},"Role"),p.a.createElement("input",{hidden:!0,name:"vacancy_role",value:z,id:"edit-vacancy_role",onChange:le,type:"number",className:"form-control"}),p.a.createElement(b.a,{menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return J(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},value:x,onChange:ge})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-experience_from"},"Experience, from"),p.a.createElement("input",{min:0,max:30,type:"number",onChange:le,name:"experience_from",value:s,id:"edit-experience_from",className:"form-control"})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-experience_up"},"Experience, to"),p.a.createElement("input",{min:0,max:30,type:"number",onChange:le,name:"experience_up",value:d,id:"edit-experience_up",className:"form-control"})),p.a.createElement("div",{className:"col-md-3"},p.a.createElement("label",{htmlFor:"edit-seniority"},"Seniority"),p.a.createElement("input",{hidden:!0,name:"seniority",value:m,id:"edit-seniority",onChange:le,type:"number",className:"form-control"}),p.a.createElement(w.a,{value:u,onChange:ce,options:P})),p.a.createElement("div",{className:"col-md-12"},p.a.createElement("label",{htmlFor:"edit-skills"},"Skills"),p.a.createElement(b.a,{isMulti:!0,menuPlacement:"auto",cacheOptions:!0,defaultOptions:!0,loadOptions:function(e){return A(e).then(function(e){return e.data})},getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},onChange:re,value:h})),p.a.createElement("div",{className:"col-md-6  edit-logo"},p.a.createElement("label",{htmlFor:"edit-logo"},"Logo"),q?B?p.a.createElement(O.a,null):V&&p.a.createElement("img",{className:"logo",src:V,alt:"logo"}):V?p.a.createElement("img",{className:"logo",src:fe,alt:"logo"}):p.a.createElement("div",{className:"no-logo"},"No logo"),p.a.createElement("input",{id:"edit-logo",type:"file",className:"input-file-custom",ref:K,onChange:X}),p.a.createElement("div",{className:"edit-logo__buttons"},p.a.createElement("label",{htmlFor:"edit-logo",className:"input-file-label  btn btn-light"},p.a.createElement("i",{className:"ion-image"}),"\xa0",p.a.createElement("span",null,"Load logo")),p.a.createElement(E.a,{disabled:!V||!fe,outline:!0,color:"danger",onClick:Z},"Delete logo"))),p.a.createElement("div",{className:"col-md-6  edit-cover"},p.a.createElement("label",{htmlFor:"edit-cover"},"Cover"),W?G?p.a.createElement(O.a,null):H&&p.a.createElement("img",{className:"cover",src:H,alt:"cover"}):H?p.a.createElement("img",{className:"cover",src:be,alt:"cover"}):p.a.createElement("div",{className:"no-cover"},"No cover"),p.a.createElement("input",{id:"edit-cover",type:"file",className:"input-file-custom",ref:Q,onChange:Y}),p.a.createElement("div",{className:"edit-cover__buttons"},p.a.createElement("label",{htmlFor:"edit-cover",className:"input-file-label  btn btn-light"},p.a.createElement("i",{className:"ion-image"}),"\xa0",p.a.createElement("span",null,"Load cover")),p.a.createElement(E.a,{disabled:!H||!be,outline:!0,color:"danger",onClick:$},"Delete cover"))),p.a.createElement("div",{className:"col-md-12"},p.a.createElement("label",{htmlFor:"edit-details"},"Details"),p.a.createElement(k.a,{value:r,onChange:ie})))),ne?p.a.createElement("div",{className:"edit-container__is-loading"},p.a.createElement(O.a,null)):p.a.createElement("footer",{className:"edit-container__buttons"},p.a.createElement(E.a,{outline:!0,color:"danger",onClick:oe},"Delete"),p.a.createElement(E.a,{outline:!0,color:"secondary",onClick:ae},"Cancel"),p.a.createElement(E.a,{disabled:!t||D()(L)||D()(h),outline:!0,color:"primary",type:"submit"},"Save")))))))}),V=t(409),H=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,t=e.pageSize,n=e.page,o=e.filtered,l=e.sorted,i={where:{},limit:t,skip:n*t,order:"id DESC"};return o.forEach(function(e){"id"===e.id?i.where[e.id]=e.value:i.where[e.id]={like:"%"+e.value+"%"}}),l.forEach(function(e){var a=e.desc?"DESC":"ASC";i.order="".concat(e.id," ").concat(a)}),C.a.get("".concat(g.a,"/").concat(g.b,"/vacancies"),{params:{filter:i},headers:{Authorization:a}})},q=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,t=e.filtered,n={};return t.forEach(function(e){"id"===e.id?n[e.id]=e.value:n[e.id]={like:"%"+e.value+"%"}}),C.a.get("".concat(g.a,"/").concat(g.b,"/vacancies/count"),{params:{where:n},headers:{Authorization:a}})},W=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,t=e.name,n=e.company,o=e.user,l=e.details,i=e.vacancy_role,c=e.seniority,r=e.experience_from,s=e.experience_up,d=e.application_type,m=e.application_link,u=e.plan_id,p=e.hash,h=e.status;return C.a.post("".concat(g.a,"/").concat(g.b,"/vacancies"),{name:t,company_id:n.id,employer_id:o.id,details:l,vacancy_role:i,seniority:c,experience_from:r,experience_up:s,application_type:d,application_link:m,plan_id:u,hash:p,status:h},{headers:{Authorization:a}})},B=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.delete("".concat(g.a,"/").concat(g.b,"/vacancies/").concat(e),{headers:{Authorization:a}})},G=function(e){for(var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id,t=e.id,n=e.name,o=e.details,l=e.logo,i=e.cover,c=e.skills,r=e.locations,s=e.vacancy,d=e.company,m=e.status,u=e.seniority,p=e.experience_up,h=e.experience_from,v=e.employer_id,f=e.plan_id,b=e.published,y=[],O=0;O<c.length;O++)y.push(c[O].name);var E=y.toString();return C.a.post("".concat(g.a,"/").concat(g.b,"/vacancies/").concat(t,"/updateJob"),{name:n,details:o,logo:l?l.split("/").pop():"",cover:i?i.split("/").pop():"",skills_string:E,locations:r,company:d.length?d[0].name:d.name,employer_id:v,plan_id:f,status:m,seniority:u,experience_from:h,experience_up:p,role:s,modified:"".concat((new Date).toISOString()),published:b},{headers:{Authorization:a}})},K=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/companies/").concat(e),{params:{filter:{limit:1}},headers:{Authorization:a}})},Q=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/users/").concat(e),{params:{filter:{limit:1}},headers:{Authorization:a}})},X=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.get("".concat(g.a,"/").concat(g.b,"/vacancy_roles/").concat(e),{params:{filter:{limit:1}},headers:{Authorization:a}})},Y=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.post("".concat(g.a,"/").concat(g.b,"/vacancies/logo"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:a}})},Z=function(e){var a=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return C.a.post("".concat(g.a,"/").concat(g.b,"/vacancies/cover"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:a}})},$=t(444),ee=[{Header:"Id",accessor:"id",width:60,style:{textAlign:"right"},Cell:function(e){var a=e.original;return p.a.createElement("div",null,a.id||"...")},Filter:function(e){var a=e.filter,t=e.onChange;return Object($.a)(a,t)}},{Header:"Job",accessor:"name",style:{fontWeight:"bold"},Cell:function(e){var a=e.original;return p.a.createElement("div",null,a.name||"...")},Filter:function(e){var a=e.filter,t=e.onChange;return Object($.a)(a,t)}},{Header:"Company",accessor:"company",sortable:!1,filterable:!1,Cell:function(e){var a=e.original;return a.company?p.a.createElement("div",null,a.company.name):p.a.createElement("div",null,"...")}},{Header:"Status",accessor:"status",width:60,Cell:function(e){var a=e.original;return p.a.createElement("div",null,a.status||"...")},Filter:function(e){var a=e.filter,t=e.onChange;return Object($.a)(a,t)}},{Header:"Created",accessor:"created",width:120,Cell:function(e){var a=e.original;return p.a.createElement("div",{style:{textAlign:"center"}},p.a.createElement("span",null,a.created.substring(0,10)||"..."))},Filter:function(e){var a=e.filter,t=e.onChange;return Object($.a)(a,t)}}],ae=function(e){function a(){var e,t,n;Object(i.a)(this,a);for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return(n=Object(r.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(d)))).fileInputLogo=p.a.createRef(),n.fileInputCover=p.a.createRef(),n.state=(t={jobs:[],jobsCount:null,tableLoading:!1,original:{},addModalIsOpen:!1,editModalIsOpen:!1,deleteModalIsOpen:!1,modalLoading:!1,id:null,created:"",modified:"",published:"".concat((new Date).toISOString()),views:null,impressions:"",skills:[],locations:[],seniorityObj:{},seniority:null,statusObj:{label:"Draft",value:"draft"},status:"draft",planObj:{label:"Free",value:1},plan_id:1,name:"",company:{name:""},company_id:null,user:{name:"",surname:"",email:""},user_id:null,employer_id:null,experience_from:0,experience_up:1,vacancy:{id:1,name:"Product Manager"},vacancy_role:1,details:"<p></p>",logo:"",logoUrl:"",cover:"",coverUrl:"",logoLoading:!1,coverLoading:!1,logoSwitcher:!1,coverSwitcher:!1,application_link:null,application_type:0,hash:null},Object(l.a)(t,"experience_from",0),Object(l.a)(t,"experience_up",1),Object(l.a)(t,"alertIsOpen",!1),Object(l.a)(t,"alertType",""),Object(l.a)(t,"alertErrorText",""),t),n.resetFields=function(){n.setState({id:null,created:"",modified:"",views:null,impressions:"",skills:[],locations:[],published:"".concat((new Date).toISOString()),seniorityObj:{},seniority:null,statusObj:{label:"Draft",value:"draft"},status:"draft",planObj:{label:"Free",value:1},plan_id:1,name:"",company:{name:""},company_id:null,user:{name:"",surname:"",email:""},user_id:null,employer_id:null,experience_from:0,experience_up:1,vacancy:{id:1,name:"Product Manager"},vacancy_role:1,details:"<p></p>",logo:"",cover:""})},n.onChange=function(e){return n.setState(Object(l.a)({},e.target.name,e.target.value))},n.onChangeCompany=function(e){return n.setState({company:e})},n.onChangeLocations=function(e){return n.setState({locations:e})},n.onChangeDetails=function(e){return n.setState({details:e})},n.onChangeSkills=function(e){return n.setState({skills:e})},n.onChangeSeniority=function(e){return n.setState({seniorityObj:e,seniority:e.value})},n.onChangeStatus=function(e){return n.setState({statusObj:e,status:e.value})},n.onChangePlan=function(e){return n.setState({planObj:e,plan_id:e.value})},n.onChangeCompany=function(e){return n.setState({company:e,company_id:e.id})},n.onChangeUser=function(e){return n.setState({user:e,employer_id:e.id})},n.onChangeVacancy=function(e){return n.setState({vacancy:e,vacancy_role:e.id})},n.catchErrors=function(e){401===e.response.status?(localStorage.removeItem("ph-admin-user-data"),n.props.history.push("/login")):n.setState({modalLoading:!1,addModalIsOpen:!1,editModalIsOpen:!1,deleteModalIsOpen:!1,alertType:"error",alertIsOpen:!0,alertErrorText:"".concat(e)})},n.addClick=function(){n.setState({addModalIsOpen:!0,alertIsOpen:!1}),n.resetFields()},n.addSubmit=function(e){e.preventDefault(),n.setState({modalLoading:!0});var a=Object(m.a)(Object(m.a)(n)).state,t=n.state,l=t.jobs,i=t.company;W(a).then(function(e){var a=[Object(o.a)({},e.data,{company:i})].concat(l);n.setState({modalLoading:!1,addModalIsOpen:!1,jobs:a}),console.log("resData:",e.data),n.editAfterAdd(e.data)}).catch(function(e){return n.catchErrors(e)})},n.editAfterAdd=function(e){n.setState({addModalIsOpen:!1,editModalIsOpen:!0,original:e,id:e.id,name:e.name,created:e.created,modified:e.modified,employer_id:e.employer_id,company_id:e.company_id,published:"".concat((new Date).toISOString()),alertIsOpen:!1})},n.editClick=function(e){return function(a){var t;a.stopPropagation(),n.setState((t={original:e,alertIsOpen:!1,editModalIsOpen:!0,logoLoading:!1,coverLoading:!1,id:e.id,name:e.name,created:e.created,modified:e.modified,published:e.published,views:e.views,impressions:e.impressions,details:e.details,experience_up:e.experience_up,experience_from:e.experience_from,seniority:e.seniority,skills:e.skills,status:e.status,plan_id:e.plan_id,employer_id:e.employer_id,locations:e.locations,company_id:e.company_id,company:e.company},Object(l.a)(t,"locations",e.locations),Object(l.a)(t,"vacancy_role",e.vacancy_role),Object(l.a)(t,"vacancy",e.vacancy),Object(l.a)(t,"logo",e.logo),Object(l.a)(t,"cover",e.cover),t));var o=e.seniority;o?P.map(function(e){e.value===o&&n.setState({seniorityObj:e})}):n.setState({seniorityObj:{}});var i=e.status;i?R.map(function(e){i===e.value&&n.setState({statusObj:e})}):n.setState({statusObj:{}});var c=e.plan_id;c?T.map(function(e){c===e.value&&n.setState({planObj:e})}):n.setState({planObj:{}});var r=e.company_id;n.setState({company:{id:null,name:"Loading..."}}),r?K(r).then(function(e){n.setState({company:e.data,company_id:e.data.id})}):n.setState({company:{id:null,name:""}});var s=e.employer_id;n.setState({user:{name:"Loading ...",surname:"",email:""}}),s?Q(s).then(function(e){n.setState({user:e.data,employer_id:e.data.id})}):n.setState({user:{name:"",surname:"",email:""}});var d=e.vacancy_role;n.setState({vacancy:{name:"Loading ..."}}),d?X(d).then(function(e){n.setState({vacancy:e.data,vacancy_role:e.data.id})}):n.setState({vacancy:{name:""}})}},n.editSubmit=function(e){e.preventDefault(),n.setState({modalLoading:!0});var a=Object(m.a)(Object(m.a)(n)).state;G(a).then(function(){for(var e=n.state,a=e.jobs,t=e.id,o=e.name,i=e.user,c=e.employer_id,r=e.created,s=e.modified,d=e.published,m=e.views,u=e.impressions,p=e.details,g=e.experience_from,h=e.experience_up,v=e.seniority,f=e.seniorityObj,b=e.skills,y=e.status,O=e.statusObj,E=e.plan_id,_=e.planObj,C=e.company_id,S=e.company,N=e.locations,j=e.vacancy_role,L=e.vacancy,I=e.logo,M=e.cover,k=0;k<a.length;k++)a[k].id===t&&(a[k]=Object(l.a)({id:t,name:o,user:i,employer_id:c,created:r,modified:s,published:d,views:m,impressions:u,details:p,experience_from:g,experience_up:h,seniority:v,seniorityObj:f,skills:b,status:y,statusObj:O,plan_id:E,planObj:_,company_id:C,company:S,locations:N,vacancy_role:j,vacancy:L,logo:I,cover:M},"modified","".concat((new Date).toISOString())));n.setState({jobs:a,modalLoading:!1,editModalIsOpen:!1,alertType:"edit",alertIsOpen:!0}),setTimeout(function(){n.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return n.catchErrors(e)})},n.deleteClick=function(e){return function(a){a.stopPropagation(),n.setState({original:e,deleteModalIsOpen:!0,alertIsOpen:!1})}},n.deleteSubmit=function(){var e=[],a=n.state,t=a.jobs,o=a.original.id;n.setState({modalLoading:!0}),B(o).then(function(){for(var a=0;a<t.length;a++)t[a].id!==o&&e.push(t[a]);n.setState({jobs:e,editModalIsOpen:!1,deleteModalIsOpen:!1,modalLoading:!1,alertType:"delete",alertIsOpen:!0}),setTimeout(function(){n.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return n.catchErrors(e)})},n.onUploadLogo=function(e){e.preventDefault(),n.setState({logoLoading:!0,logoSwitcher:!0});var a=new FormData,t=n.fileInputLogo.current.files[0];a.append("file",t),Y(a).then(function(e){n.setState({logo:"".concat(g.a,"/").concat(g.b,"/containers/logo/download/").concat(e.data.name),logoLoading:!1})}).catch(function(e){return console.log(e)})},n.onUploadCover=function(e){e.preventDefault(),n.setState({coverLoading:!0,coverSwitcher:!0});var a=new FormData,t=n.fileInputCover.current.files[0];a.append("file",t),Z(a).then(function(e){n.setState({cover:"".concat(g.a,"/").concat(g.b,"/containers/cover/download/").concat(e.data.name),coverLoading:!1})}).catch(function(e){return console.log(e)})},n.onDeleteLogo=function(){return n.setState({logo:"",logoUrl:"",logoSwitcher:!1})},n.onDeleteCover=function(){return n.setState({cover:"",coverUrl:"",coverSwitcher:!1})},n.closeAddModal=function(){return!n.state.modalLoading&&n.setState({addModalIsOpen:!1})},n.closeEditModal=function(){!n.state.modalLoading&&n.setState({editModalIsOpen:!1,logoLoading:!1,coverLoading:!1})},n.closeDeleteModal=function(){return!n.state.modalLoading&&n.setState({deleteModalIsOpen:!1})},n}return Object(d.a)(a,e),Object(c.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setHeaderTitle("Jobs")}},{key:"render",value:function(){var e,a=this,t=this.state,o=t.tableLoading,i=t.original,c=t.jobs,r=t.jobsCount,s=t.id,d=t.name,m=t.user,u=t.employer_id,g=t.created,b=t.modified,y=t.published,O=t.views,E=t.impressions,_=t.details,C=t.experience_from,S=t.experience_up,N=t.seniority,L=t.seniorityObj,M=t.skills,k=t.status,w=t.statusObj,x=t.plan_id,D=t.planObj,F=t.company_id,A=t.company,U=t.locations,J=t.vacancy_role,P=t.vacancy,R=t.addModalIsOpen,T=t.editModalIsOpen,V=t.modalLoading,W=t.deleteModalIsOpen,B=t.alertIsOpen,G=t.alertType,K=t.alertErrorText,Q=t.logo,X=t.cover,Y=t.logoSwitcher,Z=t.coverSwitcher,$=t.logoLoading,ae=t.coverLoading,te=t.logoUrl,ne=t.coverUrl,oe=[{Header:"",width:65,sortable:!1,filterable:!1,Cell:function(e){var t=e.original;return p.a.createElement("div",{className:"rt-custom__controls"},p.a.createElement("i",{className:"ion-android-delete",onClick:a.deleteClick(t)}),p.a.createElement("i",{className:"ion-edit",onClick:a.editClick(t)}))}}];return p.a.createElement("div",{className:"jobs-page"},B&&p.a.createElement(v.a,{type:G,original:i,errorText:K}),p.a.createElement(f.a,{text:"job",loading:V,addClick:this.addClick}),p.a.createElement(I,{isOpen:W,modalLoading:V,closeModal:this.closeDeleteModal,original:i,deleteSubmit:this.deleteSubmit}),p.a.createElement(j,{name:d,company:A,user:m,isOpen:R,modalLoading:V,closeModal:this.closeAddModal,onChange:this.onChange,onChangeCompany:this.onChangeCompany,onChangeUser:this.onChangeUser,onSubmit:this.addSubmit}),p.a.createElement(z,(e={id:s,name:d,details:_,original:i,skills:M,created:g,modified:b,published:y,views:O,impressions:E,experience_from:C,experience_up:S,seniority:N,seniorityObj:L,status:k,statusObj:w,plan_id:x,planObj:D,locations:U,company_id:F,company:A,user:m,employer_id:u,vacancy_role:J,vacancy:P,logo:Q,cover:X,isOpen:T,modalLoading:V,closeModal:this.closeEditModal,onChange:this.onChange,onChangeDetails:this.onChangeDetails,onChangeSkills:this.onChangeSkills,onChangeLocations:this.onChangeLocations,onChangeCompany:this.onChangeCompany,onChangeStatus:this.onChangeStatus,onChangeSeniority:this.onChangeSeniority,onChangePlan:this.onChangePlan,onChangeUser:this.onChangeUser,onChangeVacancy:this.onChangeVacancy,onSubmit:this.editSubmit,deleteClick:this.deleteClick(i)},Object(l.a)(e,"logo",Q),Object(l.a)(e,"cover",X),Object(l.a)(e,"logoSwitcher",Y),Object(l.a)(e,"coverSwitcher",Z),Object(l.a)(e,"logoLoading",$),Object(l.a)(e,"coverLoading",ae),Object(l.a)(e,"logoUrl",te),Object(l.a)(e,"coverUrl",ne),Object(l.a)(e,"fileInputLogo",this.fileInputLogo),Object(l.a)(e,"fileInputCover",this.fileInputCover),Object(l.a)(e,"onUploadLogo",this.onUploadLogo),Object(l.a)(e,"onUploadCover",this.onUploadCover),Object(l.a)(e,"onDeleteLogo",this.onDeleteLogo),Object(l.a)(e,"onDeleteCover",this.onDeleteCover),e)),p.a.createElement(h.a,{manual:!0,data:c,pages:r,loading:o,columns:[].concat(Object(n.a)(ee),oe),getTdProps:function(e,t,n,o){return{onClick:function(e){if(void 0!==t){var n=t.original;return a.editClick(n)(e)}return null}}},onFetchData:function(e){a.setState({tableLoading:!0}),q(e).then(function(t){a.setState({jobsCount:Math.ceil(t.data.count/e.pageSize)}),H(e).then(function(e){return a.setState({jobs:e.data,tableLoading:!1})}).catch(function(e){return a.catchErrors(e)})}).catch(function(e){return a.catchErrors(e)})}}))}}]),a}(p.a.Component);a.default=Object(V.a)(ae)}}]);
//# sourceMappingURL=5.3de787ad.chunk.js.map