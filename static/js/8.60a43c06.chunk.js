(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{418:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(10),r=a(11),o=a(14),l=a(12),i=a(13),c=a(0),s=a.n(c),d=a(29),u=a.n(d);function m(e){return function(t){function a(){return Object(n.a)(this,a),Object(o.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(i.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){var t={setHeaderTitle:function(e){u.a.publish("setPageTitle",e)}};return s.a.createElement(e,Object.assign({},this.props,t))}}]),a}(c.Component)}},422:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(447);a(423);t.a=function(e){return r.a.createElement(o.a,Object.assign({},e,{resizable:!0,filterable:!0,className:"-striped -highlight"}))}},423:function(e,t,a){},425:function(e,t,a){"use strict";var n=a(105),r=a(0),o=a.n(r),l=a(642);t.a=function(e){var t=e.type,a=e.original,i=e.errorText,c=Object(r.useState)(!0),s=Object(n.a)(c,2),d=s[0],u=s[1];return o.a.createElement(o.a.Fragment,null,"add"===t&&o.a.createElement(l.a,{color:"success"},"New item is added")||"edit"===t&&o.a.createElement(l.a,{color:"warning"},'"'.concat(a.id)," - ",o.a.createElement("b",null,"".concat(a.name,'" is edited')))||"delete"===t&&o.a.createElement(l.a,{color:"danger"},'"'.concat(a.id)," - ",o.a.createElement("b",null,"".concat(a.name,'" is deleted')))||"error"===t&&o.a.createElement(l.a,{color:"danger",isOpen:d,toggle:function(){return u(!1)}},i))}},426:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(419),l=a.n(o);a(427),a(429);t.a=function(e){var t=e.isOpen,a=e.modalLoading,n=e.closeModal;return r.a.createElement(l.a,Object.assign({},e,{ariaHideApp:!1,isOpen:t,overlayClassName:"ReactModal__Overlay",className:"ReactModal ReactModal__edit",portalClassName:"ReactModal__Portal__edit",onRequestClose:!a&&n}),e.children)}},427:function(e,t,a){},429:function(e,t,a){},655:function(e,t,a){"use strict";a.r(t);var n=a(42),r=a(5),o=a(10),l=a(11),i=a(14),c=a(12),s=a(13),d=a(0),u=a.n(d),m=a(422),g=a(425),h=a(426),p=a(103),v=a(282),f=function(e){var t=e.name,a=e.slug,n=e.weight,r=e.keywords,o=e.negative,l=e.original,i=e.isOpen,c=e.closeModal,s=e.onChange,d=e.onSubmit,m=e.modalLoading;return u.a.createElement(h.a,{isOpen:i,modalLoading:m,closeModal:c},u.a.createElement("section",{className:"section-container edit-container"},u.a.createElement("h4",{className:"edit-container__title"},"Edit\xa0",u.a.createElement("b",null,'"'.concat(l.id," - ").concat(l.name,'"'))),u.a.createElement("span",{className:"ion-close-round edit-container__close",onClick:c}),u.a.createElement("div",{className:"cardbox"},u.a.createElement("div",{className:"cardbox-body"},u.a.createElement("form",{action:"",onSubmit:d},u.a.createElement("fieldset",null,u.a.createElement("div",{className:"form-group row"},u.a.createElement("div",{className:"col-md-5"},u.a.createElement("label",{htmlFor:"edit-name"},"Role"),u.a.createElement("input",{required:!0,name:"name",type:"text",value:t,id:"edit-name",onChange:s,className:"form-control"})),u.a.createElement("div",{className:"col-md-5"},u.a.createElement("label",{htmlFor:"edit-slug"},"Slug"),u.a.createElement("input",{required:!0,name:"slug",type:"text",value:a,id:"edit-slug",onChange:s,className:"form-control"})),u.a.createElement("div",{className:"col-md-2"},u.a.createElement("label",{htmlFor:"edit-weight"},"Weight"),u.a.createElement("input",{min:0,max:999,name:"weight",type:"number",value:n,id:"edit-weight",onChange:s,className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-keywords"},"Search Phrases, comma-separated"),u.a.createElement("textarea",{rows:3,type:"text",name:"keywords",value:r,id:"edit-keywords",onChange:s,className:"form-control"})),u.a.createElement("div",{className:"col-md-6"},u.a.createElement("label",{htmlFor:"edit-negative"},"Stop-Words, comma-separated"),u.a.createElement("textarea",{rows:3,type:"text",name:"negative",value:o,id:"edit-negative",onChange:s,className:"form-control"})))),m?u.a.createElement("div",{className:"edit-container__is-loading"},u.a.createElement(p.a,null)):u.a.createElement("footer",{className:"edit-container__buttons"},u.a.createElement(v.a,{outline:!0,color:"secondary",onClick:c},"Cancel"),u.a.createElement(v.a,{disabled:!t||!a,outline:!0,color:"primary",type:"submit"},"Save")))))))},E=a(418),b=a(57),y=a.n(b),w=a(56),O=function(){var e=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return y.a.get("".concat(w.a,"/").concat(w.b,"/vacancy_roles"),{headers:{Authorization:e}})},C=function(e,t,a,n,r,o){var l=JSON.parse(localStorage.getItem("ph-admin-user-data")).id;return y.a.patch("".concat(w.a,"/").concat(w.b,"/vacancy_roles/").concat(e),{name:t,slug:a,weight:n,keywords:r,negative:o},{headers:{Authorization:l}})},N=[{Header:"Id",accessor:"id",width:60,style:{textAlign:"right"},Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.id||"...")}},{Header:"Role",accessor:"name",style:{fontWeight:"bold"},Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.name||"...")},filterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a].toLowerCase()).includes(e.value.toLowerCase())}},{Header:"Slug",accessor:"slug",Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.slug||"...")},filterMethod:function(e,t){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a].toLowerCase()).includes(e.value.toLowerCase())}},{Header:"Weight",accessor:"weight",width:60,Cell:function(e){var t=e.original;return u.a.createElement("div",null,t.weight||"...")}}],k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={roles:[],tableLoading:!1,alertIsOpen:!1,alertType:"",alertErrorText:"",editModalIsOpen:!1,modalLoading:!1,original:{},id:null,name:"",slug:"",weight:null,keywords:"",negative:""},a.onChange=function(e){return a.setState(Object(r.a)({},e.target.name,e.target.value))},a.catchErrors=function(e){401===e.response.status?(localStorage.removeItem("ph-admin-user-data"),a.props.history.push("/login")):a.setState({modalLoading:!1,addModalIsOpen:!1,editModalIsOpen:!1,deleteModalIsOpen:!1,alertType:"error",alertIsOpen:!0,alertErrorText:"".concat(e)})},a.editClick=function(e){return function(){a.setState({editModalIsOpen:!0,original:e,id:e.id,name:e.name,slug:e.slug,weight:e.weight,keywords:e.keywords,negative:e.negative,alertIsOpen:!1})}},a.closeModal=function(){return!a.state.modalLoading&&a.setState({editModalIsOpen:!1})},a.editSubmit=function(e){e.preventDefault(),a.setState({modalLoading:!0});var t=a.state,n=t.id,r=t.name,o=t.slug,l=t.weight,i=t.keywords,c=t.negative;C(n,r,o,l,i,c).then(function(){for(var e=a.state.roles,t=0;t<e.length;t++)e[t].id===n&&(e[t]={id:n,name:r,slug:o,weight:l,keywords:i,negative:c});a.setState({roles:e,modalLoading:!1,editModalIsOpen:!1,alertType:"edit",alertIsOpen:!0}),setTimeout(function(){a.setState({alertIsOpen:!1})},2e3)}).catch(function(e){return a.catchErrors(e)})},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setHeaderTitle("Roles")}},{key:"componentDidMount",value:function(){var e=this;this.setState({tableLoading:!0}),O().then(function(t){return e.setState({roles:t.data,tableLoading:!1})}).catch(function(t){return e.catchErrors(t)}),document.addEventListener("keyup",function(t){return 27===t.keyCode&&e.closeModal()})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",function(e){return 27===e.keyCode})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tableLoading,r=t.original,o=t.roles,l=t.name,i=t.slug,c=t.weight,s=t.keywords,d=t.negative,h=t.editModalIsOpen,p=t.modalLoading,v=t.alertIsOpen,E=t.alertType,b=t.alertErrorText,y=[{Header:"",width:65,sortable:!1,filterable:!1,Cell:function(t){var a=t.original;return u.a.createElement("div",{className:"rt-custom__controls"},u.a.createElement("i",{className:"ion-edit",onClick:e.editClick(a)}))}}];return u.a.createElement("div",{className:"roles-page"},v&&u.a.createElement(g.a,{type:E,original:r,errorText:b}),u.a.createElement(f,{name:l,slug:i,weight:c,keywords:s,negative:d,original:r,isOpen:h,modalLoading:p,closeModal:this.closeModal,onChange:this.onChange,onSubmit:this.editSubmit}),u.a.createElement(m.a,{data:o,manual:!1,loading:a,columns:[].concat(Object(n.a)(N),y)}))}}]),t}(u.a.Component);t.default=Object(E.a)(k)}}]);
//# sourceMappingURL=8.60a43c06.chunk.js.map