{"version":3,"sources":["components/Header/HeaderTitle.js","views/Pages/Jobs.js"],"names":["withHeaderTitle","WrappedComponent","_Component","HeaderTitle","Object","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","newProp","setHeaderTitle","headerTitle","pubsub","publish","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","assign","props","Component","Jobs","state","data","count","loading","columnName","sortingOrder","toggleOrder","colName","_this","setState","_this2","columns","Header","_this2$state","onClick","bind","className","cln","desc","asc","accessor","width","Cell","_ref","original","style","textAlign","id","_this2$state2","fontWeight","_ref2","title","description","concat","name","surname","_this2$state3","_ref3","company","_this2$state4","_ref4","locations","map","i","_this2$state5","_ref5","created","substring","_this$state","react_table__WEBPACK_IMPORTED_MODULE_6__","pages","manual","resizable","onFetchData","instance","pageSize","page","axios","get","API_URL","headers","Authorization","localStorage","getItem","then","res","Math","ceil","params","filter","limit","skip","order","React"],"mappings":"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","file":"static/js/7.ed4e3e21.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport pubsub from \"pubsub-js\";\r\n\r\nexport function withHeaderTitle(WrappedComponent) {\r\n    return class HeaderTitle extends Component {\r\n        render() {\r\n            const newProp = {\r\n                setHeaderTitle: headerTitle => {\r\n                    pubsub.publish(\"setPageTitle\", headerTitle);\r\n                }\r\n            };\r\n            return <WrappedComponent {...this.props} {...newProp} />;\r\n        }\r\n    };\r\n}\r\n","import React from \"react\";\nimport ReactTable from \"react-table\";\nimport cln from 'classnames';\n\nimport axios from 'axios';\nimport API_URL from '../../consts/apiUrl';\n\nimport { withHeaderTitle } from '../../components/Header/HeaderTitle';\n\n\nclass Jobs extends React.Component {\n  state = {\n    data: [],\n    count: null,\n    loading: false,\n    columnName: 'id',\n    sortingOrder: 'DESC', // DESC-ASC\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.setHeaderTitle('Jobs');\n  }\n\n  toggleOrder = (colName) => {\n    const { sortingOrder } = this.state;\n    this.setState({ columnName: colName });\n    sortingOrder === 'DESC' ? this.setState({ sortingOrder: 'ASC' }) : this.setState({ sortingOrder: 'DESC' })\n  }\n\n  render() {\n    const columns = [\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'id')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'id' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'id' && sortingOrder === 'ASC'\n              })}>ID</div>\n          )\n        },\n        accessor: 'id',\n        width: 60,\n        Cell: ({ original }) => {\n          return (\n            <div style={{ textAlign: 'right' }} >\n              <span>{original.id || '...'}</span>\n            </div>\n          )\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'name')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'name' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'name' && sortingOrder === 'ASC'\n              })}>Name</div>\n          )\n        },\n        accessor: 'name',\n        style: { fontWeight: 'bold' },\n        Cell: ({ original }) => {\n          return (\n            <div title={original.description}>\n              <span>{`${original.name} ${original.surname}` || '...'}</span>\n            </div>\n          );\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'company')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'company' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'company' && sortingOrder === 'ASC'\n              })}>Company</div>\n          )\n        },\n        accessor: 'company',\n        width: 100,\n        Cell: ({ original }) => <div>{original.company.name || 'â€”'}</div>\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'locations')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'locations' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'locations' && sortingOrder === 'ASC'\n              })}>Locations</div>\n          )\n        },\n        width: 100,\n        accessor: 'locations',\n        Cell: ({ original }) => {\n          return (\n            <div style={{ textAlign: 'center' }}>\n              <span title={original.locations.map(i => `${i.name}`)}>{original.locations[0].name}</span>\n            </div>\n          )\n        }\n      },\n\n      {\n        Header: () => {\n          const { sortingOrder, columnName, loading } = this.state;\n          return (\n            <div\n              onClick={this.toggleOrder.bind(this, 'created')}\n              className={cln('custom-th', {\n                'desc': !loading && columnName === 'created' && sortingOrder === 'DESC',\n                'asc':  !loading && columnName === 'created' && sortingOrder === 'ASC'\n              })}>Created</div>\n          )\n        },\n        width: 120,\n        accessor: 'created',\n        Cell: ({ original }) => (\n          <div style={{ textAlign: 'center' }} >\n            <span>{original.created.substring(0, 10) || '...'}</span>\n          </div>\n        )\n      },\n    ];\n\n    const { data, loading, count, columnName, sortingOrder } = this.state;\n\n    return (\n      <div>\n        <ReactTable\n          pages={count}\n          manual={true}\n          data={data}\n          loading={loading}\n          resizable={true}\n          // filterable={true}\n          className=\"companies-table -striped -highlight\"\n          columns={columns}\n          onFetchData={(state, instance) => {\n\n            // console.log(state); //sortedData\n            // own Table state\n            this.setState({ loading: true });\n            const pageSize = state.pageSize;\n            const page = state.page;\n\n            // fetch count\n            axios.get(`${API_URL}/api/api/vacancies/count`, {\n              headers: { Authorization: localStorage.getItem('ph-admin-token') }\n            }).then(res => {\n              this.setState({ count: Math.ceil(res.data.count / pageSize) });\n\n            // fetch data only for 1 page\n            }).then(\n              axios.get(`${API_URL}/api/api/vacancies`, {\n                headers: { Authorization: localStorage.getItem('ph-admin-token') },\n                params: {\n                  filter: {\n                    \"limit\": pageSize,\n                    \"skip\": page * pageSize,\n                    \"order\": `${columnName} ${sortingOrder}`\n                  }\n                }\n              }).then(res => { this.setState({ loading: false, data: res.data }) })\n            )\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withHeaderTitle(Jobs);\n"],"sourceRoot":""}