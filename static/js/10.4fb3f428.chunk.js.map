{"version":3,"sources":["components/Header/HeaderTitle.js","views/ReactTableCustom/index.jsx","views/Pages/Plans.js"],"names":["withHeaderTitle","WrappedComponent","_Component","HeaderTitle","Object","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_effectiveuser_Desktop_ph_admin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","newProp","setHeaderTitle","headerTitle","pubsub","publish","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","assign","props","Component","ReactTableCustom","state","data","count","loading","_this2","_this$props","columns","dataPath","order","_this$state","userData","JSON","parse","localStorage","getItem","token","id","react_table__WEBPACK_IMPORTED_MODULE_6__","manual","pages","resizable","filterable","className","onFetchData","pageSize","page","sorted","filtered","setState","filter","where","limit","skip","forEach","i","like","desc","concat","axios","get","API_URL","params","headers","Authorization","then","res","Math","ceil","catch","error","console","log","React","Plans","Header","accessor","width","style","textAlign","Cell","_ref","original","fontWeight","_ref2","name","_ref3","price","_ReactTableCustom__WEBPACK_IMPORTED_MODULE_6__"],"mappings":"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","file":"static/js/10.4fb3f428.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport pubsub from \"pubsub-js\";\r\n\r\nexport function withHeaderTitle(WrappedComponent) {\r\n    return class HeaderTitle extends Component {\r\n        render() {\r\n            const newProp = {\r\n                setHeaderTitle: headerTitle => {\r\n                    pubsub.publish(\"setPageTitle\", headerTitle);\r\n                }\r\n            };\r\n            return <WrappedComponent {...this.props} {...newProp} />;\r\n        }\r\n    };\r\n}\r\n","import React from \"react\";\nimport ReactTable from \"react-table\";\nimport axios from 'axios';\n\nimport API_URL from '../../consts/apiUrl';\n\nclass ReactTableCustom extends React.Component {\n  state = {\n    data: [],\n    count: null,\n    loading: false,\n  }\n\n  render() {\n    const { columns, dataPath, order } = this.props;\n    const { data, loading, count } = this.state;\n\n    // get token\n    const userData = JSON.parse(localStorage.getItem('ph-admin-user-data'));\n    const token = userData && userData.id;\n\n    return (\n      <div>\n        <ReactTable\n          manual={true}\n          pages={count}\n          data={data}\n          loading={loading}\n          resizable={true}\n          filterable={true}\n          className=\"-striped -highlight\"\n          columns={columns}\n          onFetchData={state => {\n            // use ReactTable own state to forming a request\n            // it refresh always when we're doing any actions with this table\n            // console.log(state);\n\n            const { pageSize, page, sorted, filtered } = state;\n\n            this.setState({ loading: true });\n\n            // filter template for request\n            const filter = {\n              where: {},\n              limit: pageSize,\n              skip: page * pageSize,\n              order: order // id DESC - by default\n            };\n\n            // inject values to filter object when we fill data to filter inputs\n            filtered.forEach(i => {\n              if (i.id === 'id') filter.where[i.id] = i.value\n              else               filter.where[i.id] = { 'like': i.value + '%' }\n            });\n\n            // inject data to order when we click sorting\n            sorted.forEach(i => {\n              const desc = i.desc ? 'DESC' : 'ASC'\n              filter.order = `${i.id} ${desc}`;\n            });\n\n\n            // fetch only count\n            axios.get(`${API_URL}/api/api/${dataPath}/count`, {\n              // params for get count when we have filled filters\n              params: { where: filter.where },\n              headers: { Authorization: token },\n            }\n\n            ).then(res => {\n              // save count to coponent state\n              // res.data.count - all items inside response\n              // count - we find pages-count to add to Table property pages\n              this.setState({ count: Math.ceil(res.data.count / pageSize) });\n\n            // fetch data only for 1 page\n            }).then(\n              axios.get(`${API_URL}/api/api/${dataPath}`, {\n                params: { filter },\n                headers: { Authorization: token }\n\n              }).then(res => {\n                this.setState({\n                  // save data to component state\n                  data: res.data,\n                  loading: false\n                });\n\n                // TODO catch errors\n              }).catch(error => { console.log(error) })\n            )\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default ReactTableCustom;\n","import React from \"react\";\nimport ReactTableCustom from '../ReactTableCustom';\n\nimport { withHeaderTitle } from '../../components/Header/HeaderTitle';\n\nclass Plans extends React.Component {\n  UNSAFE_componentWillMount() { this.props.setHeaderTitle('Plans') }\n\n  render() {\n    const columns = [\n      { Header: 'Id',\n        accessor: 'id',\n        width: 60,\n        style: { textAlign: 'right' },\n        Cell: ({ original }) => <div>{original.id || '...'}</div> },\n\n      { Header: 'Plan',\n        accessor: 'plan',\n        style: { fontWeight: 'bold' },\n        Cell: ({ original }) => <div>{original.name || '...'}</div> },\n\n      { Header: 'Price',\n        accessor: 'price',\n        Cell: ({ original }) => <div>{`$${original.price}`}</div> || '...' },\n    ];\n\n    return (\n      <ReactTableCustom\n        columns={columns}\n        dataPath='plans'\n      />\n    );\n  }\n}\n\nexport default withHeaderTitle(Plans);\n"],"sourceRoot":""}